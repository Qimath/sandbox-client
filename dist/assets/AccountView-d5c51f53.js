import{g as ae,_ as J,o as H,c as D,a as O,u as oe,r as M,w as ie,b as ue,d as F,e as w,f as A,h as I,B as x,i as j,j as B,k as R,l as Z,T as X,m as K,n as ce,p as le,F as fe,q as de,s as ve,t as he,v as pe,x as me}from"./index-4224d9e8.js";var Y={},V={},z={};Object.defineProperty(z,"__esModule",{value:!0});var ge=function(){function u(l,d){var b=[],k=!0,s=!1,o=void 0;try{for(var m=l[Symbol.iterator](),_;!(k=(_=m.next()).done)&&(b.push(_.value),!(d&&b.length===d));k=!0);}catch(P){s=!0,o=P}finally{try{!k&&m.return&&m.return()}finally{if(s)throw o}}return b}return function(l,d){if(Array.isArray(l))return l;if(Symbol.iterator in Object(l))return u(l,d);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();z.getPagination=_e;function _e(u){var l=u.headers.get("Link"),d={};if(l==null)return null;l=l.split(",");for(var b=u.headers.get("X-Total-Count"),k=0,s=l.length;k<s;k++){var o=l[k].replace(/(^\s*|\s*$)/,""),m=o.split(";"),_=ge(m,2),P=_[0],S=_[1],C=P.match(/page=(\d+)/),v=C&&parseInt(C[1],10);S.match(/last/)?d.last=v:S.match(/next/)?d.next=v:S.match(/prev/)?d.prev=v:S.match(/first/)&&(d.first=v)}return d.last=Math.max(d.last||0,d.prev&&d.prev+1||0),d.current=d.next?d.next-1:d.last||1,d.total=b?parseInt(b,10):null,d}(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.JSONHTTPError=u.TextHTTPError=u.HTTPError=u.getPagination=void 0;var l=Object.assign||function(v){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(v[e]=n[e])}return v},d=function(){function v(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(r,n,e){return n&&v(r.prototype,n),e&&v(r,e),r}}(),b=z;Object.defineProperty(u,"getPagination",{enumerable:!0,get:function(){return b.getPagination}});function k(v,r){if(!(v instanceof r))throw new TypeError("Cannot call a class as a function")}function s(v,r){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:v}function o(v,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);v.prototype=Object.create(r&&r.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(v,r):v.__proto__=r)}function m(v){function r(){var n=Reflect.construct(v,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return r.prototype=Object.create(v.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,v):r.__proto__=v,r}var _=u.HTTPError=function(v){o(r,v);function r(n){k(this,r);var e=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n.statusText));return e.name=e.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(e,e.constructor):e.stack=new Error(n.statusText).stack,e.status=n.status,e}return r}(m(Error)),P=u.TextHTTPError=function(v){o(r,v);function r(n,e){k(this,r);var t=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n));return t.data=e,t}return r}(_),S=u.JSONHTTPError=function(v){o(r,v);function r(n,e){k(this,r);var t=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n));return t.json=e,t}return r}(_),C=function(){function v(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments[1];k(this,v),this.apiURL=r,this.apiURL.match(/\/[^\/]?/)&&(this._sameOrigin=!0),this.defaultHeaders=n&&n.defaultHeaders||{}}return d(v,[{key:"headers",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return l({},this.defaultHeaders,{"Content-Type":"application/json"},n)}},{key:"parseJsonResponse",value:function(n){return n.json().then(function(e){if(!n.ok)return Promise.reject(new S(n,e));var t=(0,b.getPagination)(n);return t?{pagination:t,items:e}:e})}},{key:"request",value:function(n){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=this.headers(t.headers||{});return this._sameOrigin&&(t.credentials=t.credentials||"same-origin"),fetch(this.apiURL+n,l({},t,{headers:c})).then(function(p){var y=p.headers.get("Content-Type");return y&&y.match(/json/)?e.parseJsonResponse(p):p.ok?p.text().then(function(T){}):p.text().then(function(T){return Promise.reject(new P(p,T))})})}}]),v}();u.default=C})(V);var Q={},ee={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;function l(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function d(s,o){for(var m=0;m<o.length;m++){var _=o[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(s,_.key,_)}}function b(s,o,m){return o&&d(s.prototype,o),m&&d(s,m),s}var k=function(){function s(o){l(this,s),this.user=o}return b(s,[{key:"listUsers",value:function(m){return this.user._request("/admin/users",{method:"GET",audience:m})}},{key:"getUser",value:function(m){return this.user._request("/admin/users/".concat(m.id))}},{key:"updateUser",value:function(m){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.user._request("/admin/users/".concat(m.id),{method:"PUT",body:JSON.stringify(_)})}},{key:"createUser",value:function(m,_){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return P.email=m,P.password=_,this.user._request("/admin/users",{method:"POST",body:JSON.stringify(P)})}},{key:"deleteUser",value:function(m){return this.user._request("/admin/users/".concat(m.id),{method:"DELETE"})}}]),s}();u.default=k})(ee);(function(u){function l(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(a){return typeof a}:l=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},l(i)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=o(V),b=k(ee);function k(i){return i&&i.__esModule?i:{default:i}}function s(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return s=function(){return i},i}function o(i){if(i&&i.__esModule)return i;if(i===null||l(i)!=="object"&&typeof i!="function")return{default:i};var f=s();if(f&&f.has(i))return f.get(i);var a={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in i)if(Object.prototype.hasOwnProperty.call(i,g)){var U=h?Object.getOwnPropertyDescriptor(i,g):null;U&&(U.get||U.set)?Object.defineProperty(a,g,U):a[g]=i[g]}return a.default=i,f&&f.set(i,a),a}function m(i,f){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(i);f&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(i,g).enumerable})),a.push.apply(a,h)}return a}function _(i){for(var f=1;f<arguments.length;f++){var a=arguments[f]!=null?arguments[f]:{};f%2?m(Object(a),!0).forEach(function(h){P(i,h,a[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach(function(h){Object.defineProperty(i,h,Object.getOwnPropertyDescriptor(a,h))})}return i}function P(i,f,a){return f in i?Object.defineProperty(i,f,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[f]=a,i}function S(i,f){if(!(i instanceof f))throw new TypeError("Cannot call a class as a function")}function C(i,f){for(var a=0;a<f.length;a++){var h=f[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function v(i,f,a){return f&&C(i.prototype,f),a&&C(i,a),i}var r=60*1e3,n="gotrue.user",e={},t=null,c={api:1,token:1,audience:1,url:1},p={api:1},y=function(){return typeof window<"u"},T=function(){function i(f,a,h){S(this,i),this.api=f,this.url=f.apiURL,this.audience=h,this._processTokenResponse(a),t=this}return v(i,[{key:"update",value:function(a){var h=this;return this._request("/user",{method:"PUT",body:JSON.stringify(a)}).then(function(g){return h._saveUserData(g)._refreshSavedSession()})}},{key:"jwt",value:function(a){var h=this.tokenDetails();if(h==null)return Promise.reject(new Error("Gotrue-js: failed getting jwt access token"));var g=h.expires_at,U=h.refresh_token,N=h.access_token;return a||g-r<Date.now()?this._refreshToken(U):Promise.resolve(N)}},{key:"logout",value:function(){return this._request("/logout",{method:"POST"}).then(this.clearSession.bind(this)).catch(this.clearSession.bind(this))}},{key:"_refreshToken",value:function(a){var h=this;return e[a]?e[a]:e[a]=this.api.request("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=refresh_token&refresh_token=".concat(a)}).then(function(g){return delete e[a],h._processTokenResponse(g),h._refreshSavedSession(),h.token.access_token}).catch(function(g){return delete e[a],h.clearSession(),Promise.reject(g)})}},{key:"_request",value:function(a){var h=this,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};g.headers=g.headers||{};var U=g.audience||this.audience;return U&&(g.headers["X-JWT-AUD"]=U),this.jwt().then(function(N){return h.api.request(a,_({headers:Object.assign(g.headers,{Authorization:"Bearer ".concat(N)})},g)).catch(function(E){return E instanceof d.JSONHTTPError&&E.json&&(E.json.msg?E.message=E.json.msg:E.json.error&&(E.message="".concat(E.json.error,": ").concat(E.json.error_description))),Promise.reject(E)})})}},{key:"getUserData",value:function(){return this._request("/user").then(this._saveUserData.bind(this)).then(this._refreshSavedSession.bind(this))}},{key:"_saveUserData",value:function(a,h){for(var g in a)g in i.prototype||g in c||(this[g]=a[g]);return h&&(this._fromStorage=!0),this}},{key:"_processTokenResponse",value:function(a){this.token=a;try{var h=JSON.parse(re(a.access_token.split(".")[1]));this.token.expires_at=h.exp*1e3}catch(g){console.error(new Error("Gotrue-js: Failed to parse tokenResponse claims: ".concat(g)))}}},{key:"_refreshSavedSession",value:function(){return y()&&localStorage.getItem(n)&&this._saveSession(),this}},{key:"_saveSession",value:function(){return y()&&localStorage.setItem(n,JSON.stringify(this._details)),this}},{key:"tokenDetails",value:function(){return this.token}},{key:"clearSession",value:function(){i.removeSavedSession(),this.token=null,t=null}},{key:"admin",get:function(){return new b.default(this)}},{key:"_details",get:function(){var a={};for(var h in this)h in i.prototype||h in p||(a[h]=this[h]);return a}}],[{key:"removeSavedSession",value:function(){y()&&localStorage.removeItem(n)}},{key:"recoverSession",value:function(a){if(t)return t;var h=y()&&localStorage.getItem(n);if(h)try{var g=JSON.parse(h),U=g.url,N=g.token,E=g.audience;if(!U||!N)return null;var ne=a||new d.default(U,{});return new i(ne,N,E)._saveUserData(g,!0)}catch(se){return console.error(new Error("Gotrue-js: Error recovering session: ".concat(se))),null}return null}}]),i}();u.default=T;function re(i){var f=i.replace(/-/g,"+").replace(/_/g,"/");switch(f.length%4){case 0:break;case 2:f+="==";break;case 3:f+="=";break;default:throw"Illegal base64url string!"}var a=window.atob(f);try{return decodeURIComponent(escape(a))}catch{return a}}})(Q);(function(u){function l(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(e){return typeof e}:l=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(r)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=o(V),b=k(Q);function k(r){return r&&r.__esModule?r:{default:r}}function s(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return s=function(){return r},r}function o(r){if(r&&r.__esModule)return r;if(r===null||l(r)!=="object"&&typeof r!="function")return{default:r};var n=s();if(n&&n.has(r))return n.get(r);var e={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in r)if(Object.prototype.hasOwnProperty.call(r,c)){var p=t?Object.getOwnPropertyDescriptor(r,c):null;p&&(p.get||p.set)?Object.defineProperty(e,c,p):e[c]=r[c]}return e.default=r,n&&n.set(r,e),e}function m(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function _(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function P(r,n,e){return n&&_(r.prototype,n),e&&_(r,e),r}var S=/^http:\/\//,C="/.netlify/identity",v=function(){function r(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.APIUrl,t=e===void 0?C:e,c=n.audience,p=c===void 0?"":c,y=n.setCookie,T=y===void 0?!1:y;m(this,r),t.match(S)&&console.warn(`Warning:

DO NOT USE HTTP IN PRODUCTION FOR GOTRUE EVER!
GoTrue REQUIRES HTTPS to work securely.`),p&&(this.audience=p),this.setCookie=T,this.api=new d.default(t)}return P(r,[{key:"_request",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.headers=t.headers||{};var c=t.audience||this.audience;return c&&(t.headers["X-JWT-AUD"]=c),this.api.request(e,t).catch(function(p){return p instanceof d.JSONHTTPError&&p.json&&(p.json.msg?p.message=p.json.msg:p.json.error&&(p.message="".concat(p.json.error,": ").concat(p.json.error_description))),Promise.reject(p)})}},{key:"settings",value:function(){return this._request("/settings")}},{key:"signup",value:function(e,t,c){return this._request("/signup",{method:"POST",body:JSON.stringify({email:e,password:t,data:c})})}},{key:"login",value:function(e,t,c){var p=this;return this._setRememberHeaders(c),this._request("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=password&username=".concat(encodeURIComponent(e),"&password=").concat(encodeURIComponent(t))}).then(function(y){return b.default.removeSavedSession(),p.createUser(y,c)})}},{key:"loginExternalUrl",value:function(e){return"".concat(this.api.apiURL,"/authorize?provider=").concat(e)}},{key:"confirm",value:function(e,t){return this._setRememberHeaders(t),this.verify("signup",e,t)}},{key:"requestPasswordRecovery",value:function(e){return this._request("/recover",{method:"POST",body:JSON.stringify({email:e})})}},{key:"recover",value:function(e,t){return this._setRememberHeaders(t),this.verify("recovery",e,t)}},{key:"acceptInvite",value:function(e,t,c){var p=this;return this._setRememberHeaders(c),this._request("/verify",{method:"POST",body:JSON.stringify({token:e,password:t,type:"signup"})}).then(function(y){return p.createUser(y,c)})}},{key:"acceptInviteExternalUrl",value:function(e,t){return"".concat(this.api.apiURL,"/authorize?provider=").concat(e,"&invite_token=").concat(t)}},{key:"createUser",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._setRememberHeaders(t);var c=new b.default(this.api,e,this.audience);return c.getUserData().then(function(p){return t&&p._saveSession(),p})}},{key:"currentUser",value:function(){var e=b.default.recoverSession(this.api);return e&&this._setRememberHeaders(e._fromStorage),e}},{key:"verify",value:function(e,t,c){var p=this;return this._setRememberHeaders(c),this._request("/verify",{method:"POST",body:JSON.stringify({token:t,type:e})}).then(function(y){return p.createUser(y,c)})}},{key:"_setRememberHeaders",value:function(e){this.setCookie&&(this.api.defaultHeaders=this.api.defaultHeaders||{},this.api.defaultHeaders["X-Use-Cookie"]=e?"1":"session")}}]),r}();u.default=v,typeof window<"u"&&(window.GoTrue=v)})(Y);const ye=ae(Y),$=new ye({APIUrl:"https://crisp-sandbox.netlify.app/.netlify/identity",setCookie:!0}),te="https://crisp-sandbox.netlify.app/.netlify/identity/authorize?provider=";function we(u){if(u.message){if(u.message.includes("invalid_grant: No user found with that email, or password invalid."))return"Email address or password incorrect";if(u.message.includes("User not found"))return"No account matching this email address was found"}return u.message.includes("A user with this email address has already been registered")?"An account with this email address already exists":"Unknown error"}function L(u){return u.then(l=>(console.log("Success",l),{success:l,error:""})).catch(l=>(console.error("Error",l),{success:"",error:we(l)}))}function be(u,l,d){return L($.signup(u,l,{nickname:d})).then(b=>b.success?{success:b.success.user,error:""}:b)}function ke(u,l){return L($.login(u,l)).then(d=>d.success?{success:d.success.user,error:""}:d)}function Oe(){var u;(u=$.currentUser())==null||u.logout().then(l=>console.log("User logged out",l)).catch(l=>console.log("Logout error",l))}function W(){window.location.href=`${te}google`}function G(){window.location.href=`${te}github`}function Pe(u){return L($.requestPasswordRecovery(u))}function Se(){const u=new URLSearchParams(window.location.hash.substr(1));if(!u.has("access_token"))return;u.get("access_token"),Number(u.get("expires_in")),u.get("token_type");const l=$.currentUser().jwt(!0);L(l).then(d=>d.success?(console.log("OAuth login successful",d.success.user),{success:d.success.user,error:""}):(console.log("OAuth login failed",d.error),d))}const Te={},Ue={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 496"},Ee=O("path",{d:"M488,253.8c0,141.5-96.9,242.2-240,242.2S0,385.2,0,248,110.8,0,248,0c66.8,0,123,24.5,166.3,64.9l-67.5,64.9c-88.3-85.2-252.5-21.2-252.5,118.2,0,86.5,69.1,156.6,153.7,156.6,98.2,0,135-70.4,140.8-106.9H248v-85.3h236.1c2.3,12.7,3.9,24.9,3.9,41.4h0Z"},null,-1),Re=[Ee];function Ce(u,l){return H(),D("svg",Ue,Re)}const Ae=J(Te,[["render",Ce]]),Ie={},je={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 229.6 223.66"},He=O("path",{d:"M91.8,1.76C61.3,8.56,36.3,25.46,19.1,51.06c-30.1,45.1-24.1,105.6,14.3,144.2,11.5,11.6,29,22.8,42.2,27.1,4.9,1.6,5.5,1.6,7.7,.1,2.4-1.6,2.5-2,2.5-13.5v-11.8l-8.8,.5c-10.3,.5-18.3-1.3-23.1-5.4-1.7-1.4-5-6.2-7.3-10.6-3.8-7.4-6.6-10.8-14.4-17.7-2.6-2.3-2.7-2.4-.9-3.7,4.3-3.2,13-.1,18.5,6.5,9.6,11.7,13.3,14.8,18.8,16,4.9,1,9.4,.6,16.2-1.4,.9-.3,2.1-2.4,2.7-4.8,.6-2.3,2.2-5.8,3.5-7.7l2.4-3.5-8.1-1.6c-17-3.5-27.5-9.6-34.4-20-6.4-9.6-8.5-17.9-8.6-33.4,0-14.6,1.6-20.6,7.9-28.8,2.8-3.6,3.1-4.7,2.3-6.8-1.5-3.6-1.1-18.8,.5-23.4,1.3-3.4,2-4,4.7-4.3,4.5-.5,12.9,2.4,21.4,7.2l7.3,4.2,6.4-1.5c9.1-2.1,36.4-2,44.6,0l6.2,1.6,5.8-3.5c7.7-4.6,17.5-8.2,22.4-8.2,3.9,0,3.9,.1,5.5,5.2,1.7,5.9,2,16.6,.5,21.7-.8,3-.6,3.9,1.6,6.8,10.9,14.4,12.1,38.3,2.9,57.9-6.2,12.9-19.3,21.9-36.9,25.2l-8.4,1.6,3.1,5.5,3.2,5.6,.3,22.3,.4,22.3,2.5,1.6c2.3,1.5,2.8,1.5,7.6-.2,8-2.7,21.7-10.1,29.2-15.8,44.6-33.4,59-93.3,34.3-143.1-14.5-29.3-41.9-51.8-73.3-60.2-13.7-3.6-39.5-4.4-52.5-1.5Z"},null,-1),qe=[He];function xe(u,l){return H(),D("svg",je,qe)}const De=J(Ie,[["render",xe]]);const q=u=>(ve("data-v-7b9e38af"),u=u(),he(),u),Ne={class:"element"},Be={class:"form"},$e={key:0,class:"auth-container"},Je=["onSubmit"],Le=q(()=>O("h3",null,"Account Login",-1)),Me=q(()=>O("div",{class:"or-separator"},[O("span",null,"or")],-1)),We=q(()=>O("span",null,"login with google",-1)),Ge=q(()=>O("span",null,"login with github",-1)),Ve={key:1,class:"auth-container"},ze=["onSubmit"],Fe=q(()=>O("h3",null,"Account Registration",-1)),Ze=q(()=>O("div",{class:"or-separator"},[O("span",null,"or")],-1)),Xe={key:2,class:"auth-container"},Ke=["onSubmit"],Ye=q(()=>O("h3",null,"Password Recovery",-1)),Qe=q(()=>O("div",{class:"or-separator"},[O("span",null,"or")],-1)),et={__name:"AccountHandler",setup(u){const{bannerOptions:l,displayBanner:d,closeBanner:b}=de(),k=oe(),s=M({email:{value:"",error:"",success:""},password:{value:"",error:"",success:""},confirmPassword:{value:"",error:"",success:""},nickname:{value:"",error:"",success:""},successTimeoutId:null,result:null}),o=M({email:{value:"",error:"",success:""},password:{value:"",error:"",success:""},successTimeoutId:null,result:null}),m=M({email:{value:"",error:"",success:""},successTimeoutId:null,result:null});ie(()=>[o.email.value,o.password.value,s.email.value,s.password.value,m.email.value],()=>{o.email.error&&o.email.value!==""&&(o.email.error=""),o.password.error&&o.password.value!==""&&(o.password.error=""),s.email.error&&s.email.value!==""&&(s.email.error=""),s.password.error&&s.password.value!==""&&(s.password.error=""),m.email.error&&m.email.value!==""&&(m.email.error="")}),ue(()=>{const e=Se();e&&e.success!==""&&(k.setUserAccount(e.success),console.log("socially logged in"))});async function _(){o.result=null,o.email.error="",o.password.error="",o.email.success="",o.password.success="";const e=o.password.value,t=o.email.value;let c=!1;if((e.length<8||e.length>64)&&(setTimeout(()=>{o.password.error="Password invalid"},1),c=!0),(!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(t)||t.length>64)&&(setTimeout(()=>{o.email.error="Email address invalid"},1),c=!0),!c)try{const p=await ke(o.email.value,o.password.value);if(p.error&&p.error!=="")d({message:p.error,type:"error",animate:!0});else{k.setUserAccount(p.success);const y=p.success.user_metadata.full_name||p.success.user_metadata.nickname;d({message:"You are now logged in as"+y,type:"success",animate:!0})}console.log("login: ",o.result)}catch{console.error("App error: Login")}}async function P(){s.result=null,s.nickname.error="",s.email.error="",s.password.error="",s.confirmPassword.error="",s.nickname.success="",s.email.success="",s.password.success="",s.confirmPassword.success="";const e=s.nickname.value,t=s.password.value,c=s.confirmPassword.value,p=s.email.value;let y=!1;if((e.length<2||e.length>24||!/^[\w\s]+$/.test(e))&&(setTimeout(()=>{s.nickname.error="Nickname invalid"},1),y=!0),(t.length<8||t.length>64)&&(setTimeout(()=>{s.password.error="Invalid password length"},1),y=!0),(c!==t||c==="")&&(setTimeout(()=>{s.confirmPassword.error="Passwords do not match"},1),y=!0),(!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(p)||p.length>64)&&(setTimeout(()=>{s.email.error="Email address invalid"},1),y=!0),!y)try{const T=await be(p,t,e);T.error&&T.error!==""?d({message:T.error,type:"error",animate:!0}):(v=F("login"),o.email.value=s.email.value,o.password.value=s.password.value,d({message:"Your account was successfully created!",type:"info",action:"login",animate:!0})),console.log("signup: ",s.result)}catch(T){console.error("An app error occurred:",T)}}async function S(){m.result=null,m.email.error="",m.email.success="";const e=m.email.value;if(!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(e)||e.length>64){m.email.error="Email address invalid";return}try{const t=await Pe(e);t.error&&t.error!==""?d({message:t.error,type:"error",animate:!0}):d({message:"A recovery link was sent to your email address",type:"info",action:"login",animate:!0}),console.log("recovery: ",m.result)}catch(t){console.error("An app error occurred:",t)}}function C(){try{Oe();for(const e of[o,s,m])for(const t of Object.keys(e))t!=="successTimeoutId"&&(e[t].value="",e[t].error="",e[t].success="")}catch(e){console.error("An app error occurred:",e)}}const v=F("login");function r(e){v.value=e}function n(e){e==="login"&&(v.value="login")}return(e,t)=>(H(),D(fe,null,[O("div",Ne,[O("div",Be,[w(X,{name:"slide-fade",mode:"out-in"},{default:A(()=>[v.value==="login"?(H(),D("div",$e,[O("form",{onSubmit:I(_,["prevent"])},[Le,w(x,{id:"user-email",label:"Email address",error:o.email.error,success:o.email.success,icon:"email",value:o.email.value,"onUpdate:value":t[0]||(t[0]=c=>o.email.value=c)},null,8,["error","success","value"]),w(x,{id:"user-password",label:"Password",error:o.password.error,success:o.password.success,icon:"lock",value:o.password.value,"onUpdate:value":t[1]||(t[1]=c=>o.password.value=c),action:"",onAction:t[2]||(t[2]=c=>r("recovery")),"action-type":"large","action-label":"help"},null,8,["error","success","value"]),w(j,{id:"login-submit",color:"default",value:"login"}),w(j,{id:"logout-submit",color:"orange",button:"",onClick:I(C,["prevent"])},{button:A(()=>[B("logout")]),_:1},8,["onClick"]),Me,w(j,{id:"login-google",color:"blue",button:"",onClick:I(R(W),["prevent"])},{button:A(()=>[w(Ae),We]),_:1},8,["onClick"]),w(j,{id:"login-github",color:"blue",button:"",onClick:I(R(G),["prevent"])},{button:A(()=>[w(De),Ge]),_:1},8,["onClick"]),O("span",{class:"auth-option go-signup",onClick:t[3]||(t[3]=c=>r("signup"))},"I'm a pleb and I don't have an account yet")],40,Je)])):v.value==="signup"?(H(),D("div",Ve,[O("form",{onSubmit:I(P,["prevent"])},[Fe,w(x,{id:"user-nickname",label:"Nickname",error:s.nickname.error,success:s.nickname.success,icon:"people",value:s.nickname.value,"onUpdate:value":t[4]||(t[4]=c=>s.nickname.value=c)},null,8,["error","success","value"]),w(x,{id:"user-email",label:"Email address",error:s.email.error,success:s.email.success,icon:"email",value:s.email.value,"onUpdate:value":t[5]||(t[5]=c=>s.email.value=c)},null,8,["error","success","value"]),w(x,{id:"user-password",label:"Password",error:s.password.error,success:s.password.success,icon:"lock",value:s.password.value,"onUpdate:value":t[6]||(t[6]=c=>s.password.value=c)},null,8,["error","success","value"]),w(x,{id:"user-password-confirm",label:"Confirm password",error:s.confirmPassword.error,success:s.confirmPassword.success,icon:"lock",value:s.confirmPassword.value,"onUpdate:value":t[7]||(t[7]=c=>s.confirmPassword.value=c)},null,8,["error","success","value"]),w(j,{id:"signup-submit",color:"orange",value:"sign up"}),Ze,w(j,{id:"signup-google",color:"blue",button:"",onClick:I(R(W),["prevent"])},{button:A(()=>[B("signup with google")]),_:1},8,["onClick"]),w(j,{id:"signup-github",color:"blue",button:"",onClick:I(R(G),["prevent"])},{button:A(()=>[B("signup with github")]),_:1},8,["onClick"]),O("span",{class:"auth-option go-login",onClick:t[8]||(t[8]=c=>r("login"))},"I'm not a pleb and I already have an account")],40,ze)])):v.value==="recovery"?(H(),D("div",Xe,[O("form",{onSubmit:I(S,["prevent"])},[Ye,w(x,{id:"user-email-recovery",label:"Email address",error:m.email.error,success:m.email.success,icon:"email",value:m.email.value,"onUpdate:value":t[9]||(t[9]=c=>m.email.value=c)},null,8,["error","success","value"]),w(j,{id:"recovery-submit",color:"orange",value:"recover password"}),Qe,w(j,{id:"recovery-google",color:"blue",button:"",onClick:I(R(W),["prevent"])},{button:A(()=>[B("recover with google")]),_:1},8,["onClick"]),w(j,{id:"recovery-github",color:"blue",button:"",onClick:I(R(G),["prevent"])},{button:A(()=>[B("recover with github")]),_:1},8,["onClick"]),O("span",{class:"auth-option go-login",onClick:t[10]||(t[10]=c=>r("login"))},"I'm no longer a pleb and I'm ready to login")],40,Ke)])):Z("",!0)]),_:1})])]),(H(),K(le,{to:"#app"},[w(X,{name:"banner",mode:"out-in"},{default:A(()=>[R(l).visibility?(H(),K(ce,{key:0,onBannerClose:R(b),onBannerAction:n,message:R(l).message,action:R(l).action,animate:R(l).animate,type:R(l).type},null,8,["onBannerClose","message","action","animate","type"])):Z("",!0)]),_:1})]))],64))}},tt=J(et,[["__scopeId","data-v-7b9e38af"]]);const rt={class:"view-wrapper"},nt={__name:"AccountView",setup(u){return(l,d)=>(H(),D("div",rt,[w(pe,{full:"",grow:""},{container:A(()=>[w(me,null,{card:A(()=>[w(tt)]),_:1})]),_:1})]))}},at=J(nt,[["__scopeId","data-v-1ac4d140"]]);export{at as default};
