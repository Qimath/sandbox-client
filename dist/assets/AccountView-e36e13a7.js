import{_ as h,o as p,c as f,a as n,u as R,r as k,b as P,d as a,B as v,e as w,w as _,f as g,g as m,h as x,i as H,l as T,p as C,j as A,k as Z,s as U,m as V,n as N,q as G,t as M,v as $,T as I,x as O,y as W,z as Y,A as D,C as j,D as q}from"./index-19f2d18f.js";const F={},J={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 496"},K=n("path",{d:"M488,253.8c0,141.5-96.9,242.2-240,242.2S0,385.2,0,248,110.8,0,248,0c66.8,0,123,24.5,166.3,64.9l-67.5,64.9c-88.3-85.2-252.5-21.2-252.5,118.2,0,86.5,69.1,156.6,153.7,156.6,98.2,0,135-70.4,140.8-106.9H248v-85.3h236.1c2.3,12.7,3.9,24.9,3.9,41.4h0Z"},null,-1),Q=[K];function X(i,c){return p(),f("svg",J,Q)}const z=h(F,[["render",X]]),ee={},oe={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 229.6 223.66"},re=n("path",{d:"M91.8,1.76C61.3,8.56,36.3,25.46,19.1,51.06c-30.1,45.1-24.1,105.6,14.3,144.2,11.5,11.6,29,22.8,42.2,27.1,4.9,1.6,5.5,1.6,7.7,.1,2.4-1.6,2.5-2,2.5-13.5v-11.8l-8.8,.5c-10.3,.5-18.3-1.3-23.1-5.4-1.7-1.4-5-6.2-7.3-10.6-3.8-7.4-6.6-10.8-14.4-17.7-2.6-2.3-2.7-2.4-.9-3.7,4.3-3.2,13-.1,18.5,6.5,9.6,11.7,13.3,14.8,18.8,16,4.9,1,9.4,.6,16.2-1.4,.9-.3,2.1-2.4,2.7-4.8,.6-2.3,2.2-5.8,3.5-7.7l2.4-3.5-8.1-1.6c-17-3.5-27.5-9.6-34.4-20-6.4-9.6-8.5-17.9-8.6-33.4,0-14.6,1.6-20.6,7.9-28.8,2.8-3.6,3.1-4.7,2.3-6.8-1.5-3.6-1.1-18.8,.5-23.4,1.3-3.4,2-4,4.7-4.3,4.5-.5,12.9,2.4,21.4,7.2l7.3,4.2,6.4-1.5c9.1-2.1,36.4-2,44.6,0l6.2,1.6,5.8-3.5c7.7-4.6,17.5-8.2,22.4-8.2,3.9,0,3.9,.1,5.5,5.2,1.7,5.9,2,16.6,.5,21.7-.8,3-.6,3.9,1.6,6.8,10.9,14.4,12.1,38.3,2.9,57.9-6.2,12.9-19.3,21.9-36.9,25.2l-8.4,1.6,3.1,5.5,3.2,5.6,.3,22.3,.4,22.3,2.5,1.6c2.3,1.5,2.8,1.5,7.6-.2,8-2.7,21.7-10.1,29.2-15.8,44.6-33.4,59-93.3,34.3-143.1-14.5-29.3-41.9-51.8-73.3-60.2-13.7-3.6-39.5-4.4-52.5-1.5Z"},null,-1),se=[re];function ae(i,c){return p(),f("svg",oe,se)}const L=h(ee,[["render",ae]]);const b=i=>(C("data-v-96bc068c"),i=i(),A(),i),ne={class:"element"},te=["onSubmit"],ie={class:"auth-container"},le=b(()=>n("h3",null,"Account Login",-1)),ce=b(()=>n("div",{class:"or-separator"},[n("span",null,"or")],-1)),ue=b(()=>n("span",null,"login with google",-1)),de=b(()=>n("span",null,"login with github",-1)),me={__name:"LoginHandler",emits:["auth-window","banner"],setup(i,{emit:c}){const e=R(),s=k({email:{value:"",error:""},password:{value:"",error:""}});P(async()=>{new URLSearchParams(window.location.hash.substr(1)).has("access_token")&&(console.log("mountedCheck"),await userCallback())});async function t(){s.email.error="",s.password.error="";const o=s.email.value,r=s.password.value;let l=!1;if((r.length<8||r.length>64)&&(setTimeout(()=>{s.password.error="Password invalid"},1),l=!0),(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(o)||o.length>64)&&(setTimeout(()=>{s.email.error="Email address invalid"},1),l=!0),!l)try{const u=await T(s.email.value,s.password.value);u.error&&u.error!==""?c("banner",{message:u.error,type:"error",animate:!0}):(window.sessionStorage.setItem("loggedIn","true"),e.push({name:"dashboard"}).then(()=>e.go()))}catch(u){console.error("App error => Login: ",u)}}return(o,r)=>(p(),f("div",ne,[n("form",{onSubmit:g(t,["prevent"])},[n("div",ie,[le,a(v,{id:"user-email",label:"Email address",error:s.email.error,success:s.email.success,icon:"email",value:s.email.value,"onUpdate:value":r[0]||(r[0]=l=>s.email.value=l)},null,8,["error","success","value"]),a(v,{id:"user-password",label:"Password",error:s.password.error,success:s.password.success,icon:"lock",value:s.password.value,"onUpdate:value":r[1]||(r[1]=l=>s.password.value=l),action:"",onAction:r[2]||(r[2]=l=>o.$emit("auth-window","recovery")),"action-type":"large","action-label":"help",type:"password"},null,8,["error","success","value"]),a(w,{id:"login-submit",color:"orange",value:"login"}),ce,a(w,{id:"login-google",color:"blue",button:"",onClick:g(m(x),["prevent"])},{button:_(()=>[a(z),ue]),_:1},8,["onClick"]),a(w,{id:"login-github",color:"blue",button:"",onClick:g(m(H),["prevent"])},{button:_(()=>[a(L),de]),_:1},8,["onClick"]),n("span",{class:"auth-option go-signup",onClick:r[3]||(r[3]=l=>o.$emit("auth-window","signup"))},"I'm a pleb and I don't have an account yet")])],40,te)]))}},B=h(me,[["__scopeId","data-v-96bc068c"]]);const y=i=>(C("data-v-10128f5e"),i=i(),A(),i),pe={class:"element"},_e=["onSubmit"],ve={class:"auth-container"},we=y(()=>n("h3",null,"Account Registration",-1)),ge=y(()=>n("div",{class:"or-separator"},[n("span",null,"or")],-1)),he=y(()=>n("span",null,"Signup with google",-1)),fe=y(()=>n("span",null,"Signup with github",-1)),be={__name:"SignupHandler",emits:["auth-window","banner"],setup(i,{emit:c}){const e=k({email:{value:"",error:""},password:{value:"",error:""},confirmPassword:{value:"",error:""},nickname:{value:"",error:""}});Z(()=>[e.email.value,e.nickname.value,e.password.value,e.confirmPassword.value],([t,o,r,l],[u,d,S,E])=>{t!==u&&e.email.error&&(e.email.error=""),o!==d&&e.nickname.error&&(e.nickname.error=""),r!==S&&e.password.error&&(e.password.error=""),l!==E&&e.confirmPassword.error&&(e.confirmPassword.error="")});async function s(){e.result=null,e.nickname.error="",e.email.error="",e.password.error="",e.confirmPassword.error="";const t=e.nickname.value,o=e.password.value,r=e.confirmPassword.value,l=e.email.value;let u=!1;if((t.length<2||t.length>24||!/^[\w\s]+$/.test(t))&&(setTimeout(()=>{e.nickname.error="Nickname invalid"},1),u=!0),(o.length<8||o.length>64)&&(setTimeout(()=>{e.password.error="Invalid password length"},1),u=!0),(r!==o||r==="")&&(setTimeout(()=>{e.confirmPassword.error="Passwords do not match"},1),u=!0),(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(l)||l.length>64)&&(setTimeout(()=>{e.email.error="Email address invalid"},1),u=!0),!u)try{const d=await U(l,o,t);d.error&&d.error!==""?c("banner",{message:d.error,type:"error",animate:!0}):(c("auth-window","login"),c("banner",{message:"Your account was successfully created! You can now login",type:"success",animate:!0}))}catch(d){console.error("An app error occurred:",d)}}return(t,o)=>(p(),f("div",pe,[n("form",{onSubmit:g(s,["prevent"])},[n("div",ve,[we,a(v,{id:"user-nickname",label:"Nickname",error:e.nickname.error,success:e.nickname.success,icon:"people",value:e.nickname.value,"onUpdate:value":o[0]||(o[0]=r=>e.nickname.value=r)},null,8,["error","success","value"]),a(v,{id:"user-email",label:"Email address",error:e.email.error,success:e.email.success,icon:"email",value:e.email.value,"onUpdate:value":o[1]||(o[1]=r=>e.email.value=r)},null,8,["error","success","value"]),a(v,{id:"user-password",label:"Password",error:e.password.error,success:e.password.success,icon:"lock",value:e.password.value,"onUpdate:value":o[2]||(o[2]=r=>e.password.value=r),type:"password"},null,8,["error","success","value"]),a(v,{id:"user-password-confirm",label:"Confirm password",error:e.confirmPassword.error,success:e.confirmPassword.success,icon:"lock",value:e.confirmPassword.value,"onUpdate:value":o[3]||(o[3]=r=>e.confirmPassword.value=r),type:"password"},null,8,["error","success","value"]),a(w,{id:"signup-submit",color:"orange",value:"sign up"}),ge,a(w,{id:"login-google",color:"blue",button:"",onClick:g(m(x),["prevent"])},{button:_(()=>[a(z),he]),_:1},8,["onClick"]),a(w,{id:"login-github",color:"blue",button:"",onClick:g(m(H),["prevent"])},{button:_(()=>[a(L),fe]),_:1},8,["onClick"]),n("span",{class:"auth-option go-login",onClick:o[4]||(o[4]=r=>t.$emit("auth-window","login"))},"I'm not a pleb and I already have an account")])],40,_e)]))}},ye=h(be,[["__scopeId","data-v-10128f5e"]]);const $e=i=>(C("data-v-0b3548ee"),i=i(),A(),i),ke={class:"element"},Ce=["onSubmit"],Ae={class:"auth-container"},Se=$e(()=>n("h3",null,"Password Recovery",-1)),Ie={__name:"RecoveryHandler",emits:["auth-window","banner"],setup(i,{emit:c}){const e=k({email:{value:"",error:""}});Z(()=>[e.email.value],([t],[o])=>{t!==o&&e.email.error&&(e.email.error="")});async function s(){e.email.error="";const t=e.email.value;if(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t)||t.length>64){e.email.error="Email address invalid";return}try{const o=await V(t);o.error&&o.error!==""?c("banner",{message:o.error,type:"error",animate:!0}):c("banner",{message:"A recovery link was sent to your email address",type:"info",action:"login",animate:!0})}catch(o){console.error("An app error occurred:",o)}}return(t,o)=>(p(),f("div",ke,[n("form",{onSubmit:g(s,["prevent"])},[n("div",Ae,[Se,a(v,{id:"user-email-recovery",label:"Email address",error:e.email.error,success:e.email.success,icon:"email",value:e.email.value,"onUpdate:value":o[0]||(o[0]=r=>e.email.value=r)},null,8,["error","success","value"]),a(w,{id:"recovery-submit",color:"orange",value:"recover password"}),n("span",{class:"auth-option go-login",onClick:o[1]||(o[1]=r=>t.$emit("auth-window","login"))},"I'm no longer a pleb and I'm ready to login")])],40,Ce)]))}},Be=h(Ie,[["__scopeId","data-v-0b3548ee"]]);const Pe={class:"view-wrapper"},xe={__name:"AccountView",setup(i){const{bannerOptions:c,displayBanner:e,closeBanner:s}=W(),t=N("login");function o(d){t.value=d}const r=G(()=>{switch(t.value){case"login":return B;case"signup":return ye;case"recovery":return Be;default:return B}});function l(d){e(d)}function u(d){d==="login"&&(o(d),s())}return P(()=>{window.sessionStorage.getItem("loggedOut")&&(e({message:"You are now logged out. Authenticate again to access the dashboard",type:"warning",animate:!0}),window.sessionStorage.removeItem("loggedOut"))}),(d,S)=>(p(),f("div",Pe,[a(M,{full:"",grow:""},{container:_(()=>[a(Y,null,{card:_(()=>[a(I,{name:"slide-fade",mode:"out-in"},{default:_(()=>[(p(),$(D(m(r)),{key:m(r),onAuthWindow:o,onBanner:l},null,32))]),_:1})]),_:1})]),_:1}),(p(),$(O,{to:"body"},[a(I,{name:"banner",mode:"out-in"},{default:_(()=>[m(c).visibility?(p(),$(j,{key:0,onBannerClose:m(s),onBannerAction:u,message:m(c).message,action:m(c).action,animate:m(c).animate,type:m(c).type},null,8,["onBannerClose","message","action","animate","type"])):q("",!0)]),_:1})]))]))}},Ze=h(xe,[["__scopeId","data-v-d36f03e8"]]);export{Ze as default};
