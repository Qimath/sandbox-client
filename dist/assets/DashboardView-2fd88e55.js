import{_ as k,E as C,u as D,n as l,r as H,w as T,F as U,o as v,c as I,a as u,b as o,g as s,G as $,f as B,B as y,d as h,e as m,H as P,I as M,p as O,j,q,t as z,v as S,T as F,x as G,y as J,z as L,C as R,D as W}from"./index-580e99f6.js";const A=c=>(O("data-v-e5b16953"),c=c(),j(),c),Y={class:"element"},K={class:"form"},Q={class:"auth-container"},X=A(()=>u("h3",null,"Account Profile",-1)),Z=A(()=>u("div",{class:"or-separator"},[u("span",null,"or")],-1)),ee={__name:"ProfileHandler",emits:["auth-window","banner"],setup(c,{emit:w}){const n=C(),a=D(),g=l(()=>n.getAccount().nickname),d=l(()=>n.getAccount().email),f=l(()=>n.getAccount().avatar),p=l(()=>n.getAccount().login);let _=l(()=>n.getAccount().provider).value==="email";_=!1;const e=H({email:{value:d,error:""},password:{value:"",error:""},confirmPassword:{value:"",error:""}});T(()=>[e.email.value,e.password.value,e.confirmPassword.value],([t,r,b],[i,E,N])=>{t!==i&&e.email.error&&(e.email.error=""),r!==E&&e.password.error&&(e.password.error=""),b!==N&&e.confirmPassword.error&&(e.confirmPassword.error="")});async function V(){try{const t=await M();t.error&&t.error!==""?w("banner",{message:t.error,type:"error",animate:!0}):(window.sessionStorage.setItem("loggedOut","true"),a.push({name:"account"}).then(()=>a.go()))}catch(t){console.error("An app error occurred:",t)}}return(t,r)=>{const b=U("router-link");return v(),I("div",Y,[u("div",K,[u("div",Q,[X,o($,{primary:s(g),secondary:s(d),picture:s(f),status:s(p)},null,8,["primary","secondary","picture","status"]),u("form",{onSubmit:r[3]||(r[3]=B(()=>{},["prevent"]))},[o(y,{id:"user-email",label:"Email address",error:e.email.error,success:e.email.success,icon:"email",value:e.email.value,"onUpdate:value":r[0]||(r[0]=i=>e.email.value=i),disabled:!s(_)},null,8,["error","success","value","disabled"]),o(y,{id:"user-password",label:"Password",error:e.password.error,success:e.password.success,icon:"lock",value:e.password.value,"onUpdate:value":r[1]||(r[1]=i=>e.password.value=i),type:"password",disabled:!s(_)},null,8,["error","success","value","disabled"]),o(y,{id:"user-password-confirm",label:"Confirm password",error:e.confirmPassword.error,success:e.confirmPassword.success,icon:"lock",value:e.confirmPassword.value,"onUpdate:value":r[2]||(r[2]=i=>e.confirmPassword.value=i),type:"password",disabled:!s(_)},null,8,["error","success","value","disabled"]),o(h,{id:"profile-submit",color:"blue",value:"update & save"})],32),Z,o(h,{id:"logout",color:"orange",button:"",onClick:B(V,["prevent"])},{button:m(()=>[P("logout")]),_:1},8,["onClick"]),o(b,{to:"/settings",class:"auth-option go-settings"},{default:m(()=>[P("Just take me to the Settings page")]),_:1})])])])}}},se=k(ee,[["__scopeId","data-v-e5b16953"]]);const oe={class:"view-wrapper"},re={__name:"DashboardView",setup(c){const w=C(),n=l(()=>w.getAccount().email),{bannerOptions:a,displayBanner:g,closeBanner:d}=J();function f(p){p==="login"&&(authWindowSwap(p),d())}return q(()=>{window.sessionStorage.getItem("loggedIn")&&(g({message:`You are now successfully logged in as <strong>${n.value}</strong>`,type:"success",animate:!0}),window.sessionStorage.removeItem("loggedIn"))}),(p,x)=>(v(),I("div",oe,[o(z,{full:"",grow:""},{container:m(()=>[o(L,null,{card:m(()=>[o(se)]),_:1})]),_:1}),(v(),S(G,{to:"body"},[o(F,{name:"banner",mode:"out-in"},{default:m(()=>[s(a).visibility?(v(),S(R,{key:0,onBannerClose:s(d),onBannerAction:f,message:s(a).message,action:s(a).action,animate:s(a).animate,type:s(a).type},null,8,["onBannerClose","message","action","animate","type"])):W("",!0)]),_:1})]))]))}},te=k(re,[["__scopeId","data-v-4531c159"]]);export{te as default};
