import{_ as B,o as p,c as b,a as n,r as A,w as R,b as Z,s as z,d as G,e as a,f as c,g as d,B as h,h as m,i as C,u as i,l as I,j as P,k as x,T as S,m as T,n as H,p as M,F as W,q as Y,t as q,v as F,x as j,y as D,z as O,A as J,C as K,D as Q}from"./index-45e793ee.js";const X={},ee={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 496"},se=n("path",{d:"M488,253.8c0,141.5-96.9,242.2-240,242.2S0,385.2,0,248,110.8,0,248,0c66.8,0,123,24.5,166.3,64.9l-67.5,64.9c-88.3-85.2-252.5-21.2-252.5,118.2,0,86.5,69.1,156.6,153.7,156.6,98.2,0,135-70.4,140.8-106.9H248v-85.3h236.1c2.3,12.7,3.9,24.9,3.9,41.4h0Z"},null,-1),re=[se];function oe(w,v){return p(),b("svg",ee,re)}const ae=B(X,[["render",oe]]),ne={},le={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 229.6 223.66"},te=n("path",{d:"M91.8,1.76C61.3,8.56,36.3,25.46,19.1,51.06c-30.1,45.1-24.1,105.6,14.3,144.2,11.5,11.6,29,22.8,42.2,27.1,4.9,1.6,5.5,1.6,7.7,.1,2.4-1.6,2.5-2,2.5-13.5v-11.8l-8.8,.5c-10.3,.5-18.3-1.3-23.1-5.4-1.7-1.4-5-6.2-7.3-10.6-3.8-7.4-6.6-10.8-14.4-17.7-2.6-2.3-2.7-2.4-.9-3.7,4.3-3.2,13-.1,18.5,6.5,9.6,11.7,13.3,14.8,18.8,16,4.9,1,9.4,.6,16.2-1.4,.9-.3,2.1-2.4,2.7-4.8,.6-2.3,2.2-5.8,3.5-7.7l2.4-3.5-8.1-1.6c-17-3.5-27.5-9.6-34.4-20-6.4-9.6-8.5-17.9-8.6-33.4,0-14.6,1.6-20.6,7.9-28.8,2.8-3.6,3.1-4.7,2.3-6.8-1.5-3.6-1.1-18.8,.5-23.4,1.3-3.4,2-4,4.7-4.3,4.5-.5,12.9,2.4,21.4,7.2l7.3,4.2,6.4-1.5c9.1-2.1,36.4-2,44.6,0l6.2,1.6,5.8-3.5c7.7-4.6,17.5-8.2,22.4-8.2,3.9,0,3.9,.1,5.5,5.2,1.7,5.9,2,16.6,.5,21.7-.8,3-.6,3.9,1.6,6.8,10.9,14.4,12.1,38.3,2.9,57.9-6.2,12.9-19.3,21.9-36.9,25.2l-8.4,1.6,3.1,5.5,3.2,5.6,.3,22.3,.4,22.3,2.5,1.6c2.3,1.5,2.8,1.5,7.6-.2,8-2.7,21.7-10.1,29.2-15.8,44.6-33.4,59-93.3,34.3-143.1-14.5-29.3-41.9-51.8-73.3-60.2-13.7-3.6-39.5-4.4-52.5-1.5Z"},null,-1),ie=[te];function ue(w,v){return p(),b("svg",le,ie)}const ce=B(ne,[["render",ue]]);const g=w=>(O("data-v-bf5d5cd7"),w=w(),J(),w),de={class:"element"},me={class:"form"},pe={key:0,class:"auth-container"},ve=["onSubmit"],ge=g(()=>n("h3",null,"Account Login",-1)),we=g(()=>n("div",{class:"or-separator"},[n("span",null,"or")],-1)),_e=g(()=>n("span",null,"login with google",-1)),fe=g(()=>n("span",null,"login with github",-1)),he={key:1,class:"auth-container"},be=["onSubmit"],ye=g(()=>n("h3",null,"Account Registration",-1)),ke=g(()=>n("div",{class:"or-separator"},[n("span",null,"or")],-1)),Ce={key:2,class:"auth-container"},$e=["onSubmit"],Be=g(()=>n("h3",null,"Password Recovery",-1)),Ae=g(()=>n("div",{class:"or-separator"},[n("span",null,"or")],-1)),Ie={__name:"AccountHandler",setup(w){const{bannerOptions:v,displayBanner:_,closeBanner:E}=Y(),e=A({email:{value:"",error:"",success:""},password:{value:"",error:"",success:""},confirmPassword:{value:"",error:"",success:""},nickname:{value:"",error:"",success:""},successTimeoutId:null,result:null}),r=A({email:{value:"",error:"",success:""},password:{value:"",error:"",success:""},successTimeoutId:null,result:null}),t=A({email:{value:"",error:"",success:""},successTimeoutId:null,result:null});R(()=>[r.email.value,r.password.value,e.email.value,e.password.value,t.email.value],()=>{r.email.error&&r.email.value!==""&&(r.email.error=""),r.password.error&&r.password.value!==""&&(r.password.error=""),e.email.error&&e.email.value!==""&&(e.email.error=""),e.password.error&&e.password.value!==""&&(e.password.error=""),t.email.error&&t.email.value!==""&&(t.email.error="")}),Z(()=>{z()});async function U(){r.result=null,r.email.error="",r.password.error="",r.email.success="",r.password.success="";const l=r.password.value,s=r.email.value;let o=!1;if((l.length<8||l.length>64)&&(setTimeout(()=>{r.password.error="Password invalid"},1),o=!0),(!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(s)||s.length>64)&&(setTimeout(()=>{r.email.error="Email address invalid"},1),o=!0),!o)try{const u=await q(r.email.value,r.password.value);if(u.error&&u.error!=="")_({message:u.error,type:"error",animate:!0});else{const f=u.success.user_metadata.full_name||u.success.user_metadata.nickname;_({message:`You are now logged in as <strong>${f}</strong>`,type:"success",animate:!0})}}catch(u){console.error("App error => Login: ",u)}}async function L(){e.result=null,e.nickname.error="",e.email.error="",e.password.error="",e.confirmPassword.error="",e.nickname.success="",e.email.success="",e.password.success="",e.confirmPassword.success="";const l=e.nickname.value,s=e.password.value,o=e.confirmPassword.value,u=e.email.value;let f=!1;if((l.length<2||l.length>24||!/^[\w\s]+$/.test(l))&&(setTimeout(()=>{e.nickname.error="Nickname invalid"},1),f=!0),(s.length<8||s.length>64)&&(setTimeout(()=>{e.password.error="Invalid password length"},1),f=!0),(o!==s||o==="")&&(setTimeout(()=>{e.confirmPassword.error="Passwords do not match"},1),f=!0),(!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(u)||u.length>64)&&(setTimeout(()=>{e.email.error="Email address invalid"},1),f=!0),!f)try{const k=await F(u,s,l);k.error&&k.error!==""?_({message:k.error,type:"error",animate:!0}):(y.value="login",r.email.value=e.email.value,r.password.value=e.password.value,_({message:"Your account was successfully created! You can now login",type:"success",animate:!0}))}catch(k){console.error("An app error occurred:",k)}}async function N(){t.result=null,t.email.error="",t.email.success="";const l=t.email.value;if(!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(l)||l.length>64){t.email.error="Email address invalid";return}try{const s=await j(l);s.error&&s.error!==""?_({message:s.error,type:"error",animate:!0}):_({message:"A recovery link was sent to your email address",type:"info",action:"login",animate:!0}),console.log("recovery: ",t.result)}catch(s){console.error("An app error occurred:",s)}}function V(){try{D()}catch(l){console.error("An app error occurred:",l)}}const y=G("login");function $(l){y.value=l}return(l,s)=>(p(),b(W,null,[n("div",de,[n("div",me,[a(S,{name:"slide-fade",mode:"out-in"},{default:c(()=>[y.value==="login"?(p(),b("div",pe,[n("form",{onSubmit:d(U,["prevent"])},[ge,a(h,{id:"user-email",label:"Email address",error:r.email.error,success:r.email.success,icon:"email",value:r.email.value,"onUpdate:value":s[0]||(s[0]=o=>r.email.value=o)},null,8,["error","success","value"]),a(h,{id:"user-password",label:"Password",error:r.password.error,success:r.password.success,icon:"lock",value:r.password.value,"onUpdate:value":s[1]||(s[1]=o=>r.password.value=o),action:"",onAction:s[2]||(s[2]=o=>$("recovery")),"action-type":"large","action-label":"help"},null,8,["error","success","value"]),a(m,{id:"login-submit",color:"default",value:"login"}),a(m,{id:"logout-submit",color:"orange",button:"",onClick:d(V,["prevent"])},{button:c(()=>[C("logout")]),_:1},8,["onClick"]),we,a(m,{id:"login-google",color:"blue",button:"",onClick:d(i(I),["prevent"])},{button:c(()=>[a(ae),_e]),_:1},8,["onClick"]),a(m,{id:"login-github",color:"blue",button:"",onClick:d(i(P),["prevent"])},{button:c(()=>[a(ce),fe]),_:1},8,["onClick"]),n("span",{class:"auth-option go-signup",onClick:s[3]||(s[3]=o=>$("signup"))},"I'm a pleb and I don't have an account yet")],40,ve)])):y.value==="signup"?(p(),b("div",he,[n("form",{onSubmit:d(L,["prevent"])},[ye,a(h,{id:"user-nickname",label:"Nickname",error:e.nickname.error,success:e.nickname.success,icon:"people",value:e.nickname.value,"onUpdate:value":s[4]||(s[4]=o=>e.nickname.value=o)},null,8,["error","success","value"]),a(h,{id:"user-email",label:"Email address",error:e.email.error,success:e.email.success,icon:"email",value:e.email.value,"onUpdate:value":s[5]||(s[5]=o=>e.email.value=o)},null,8,["error","success","value"]),a(h,{id:"user-password",label:"Password",error:e.password.error,success:e.password.success,icon:"lock",value:e.password.value,"onUpdate:value":s[6]||(s[6]=o=>e.password.value=o)},null,8,["error","success","value"]),a(h,{id:"user-password-confirm",label:"Confirm password",error:e.confirmPassword.error,success:e.confirmPassword.success,icon:"lock",value:e.confirmPassword.value,"onUpdate:value":s[7]||(s[7]=o=>e.confirmPassword.value=o)},null,8,["error","success","value"]),a(m,{id:"signup-submit",color:"orange",value:"sign up"}),ke,a(m,{id:"signup-google",color:"blue",button:"",onClick:d(i(I),["prevent"])},{button:c(()=>[C("signup with google")]),_:1},8,["onClick"]),a(m,{id:"signup-github",color:"blue",button:"",onClick:d(i(P),["prevent"])},{button:c(()=>[C("signup with github")]),_:1},8,["onClick"]),n("span",{class:"auth-option go-login",onClick:s[8]||(s[8]=o=>$("login"))},"I'm not a pleb and I already have an account")],40,be)])):y.value==="recovery"?(p(),b("div",Ce,[n("form",{onSubmit:d(N,["prevent"])},[Be,a(h,{id:"user-email-recovery",label:"Email address",error:t.email.error,success:t.email.success,icon:"email",value:t.email.value,"onUpdate:value":s[9]||(s[9]=o=>t.email.value=o)},null,8,["error","success","value"]),a(m,{id:"recovery-submit",color:"orange",value:"recover password"}),Ae,a(m,{id:"recovery-google",color:"blue",button:"",onClick:d(i(I),["prevent"])},{button:c(()=>[C("recover with google")]),_:1},8,["onClick"]),a(m,{id:"recovery-github",color:"blue",button:"",onClick:d(i(P),["prevent"])},{button:c(()=>[C("recover with github")]),_:1},8,["onClick"]),n("span",{class:"auth-option go-login",onClick:s[10]||(s[10]=o=>$("login"))},"I'm no longer a pleb and I'm ready to login")],40,$e)])):x("",!0)]),_:1})])]),(p(),T(M,{to:"#app"},[a(S,{name:"banner",mode:"out-in"},{default:c(()=>[i(v).visibility?(p(),T(H,{key:0,onBannerClose:i(E),message:i(v).message,action:i(v).action,animate:i(v).animate,type:i(v).type},null,8,["onBannerClose","message","action","animate","type"])):x("",!0)]),_:1})]))],64))}},Pe=B(Ie,[["__scopeId","data-v-bf5d5cd7"]]);const xe={class:"view-wrapper"},Se={__name:"AccountView",setup(w){return(v,_)=>(p(),b("div",xe,[a(K,{full:"",grow:""},{container:c(()=>[a(Q,null,{card:c(()=>[a(Pe)]),_:1})]),_:1})]))}},Ee=B(Se,[["__scopeId","data-v-1ac4d140"]]);export{Ee as default};
