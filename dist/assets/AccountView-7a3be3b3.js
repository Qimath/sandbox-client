import{_ as $,o as p,c as b,a as t,u as Z,r as B,w as z,b as G,g as H,d as M,e as n,f as c,h as d,B as h,i as m,j as C,k as u,l as I,m as P,n as S,T,p as U,q as W,s as Y,F as j,t as q,v as F,x as O,y as D,z as J,A as K,C as Q,D as X,E as ee}from"./index-fad68f9d.js";const se={},re={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 496"},oe=t("path",{d:"M488,253.8c0,141.5-96.9,242.2-240,242.2S0,385.2,0,248,110.8,0,248,0c66.8,0,123,24.5,166.3,64.9l-67.5,64.9c-88.3-85.2-252.5-21.2-252.5,118.2,0,86.5,69.1,156.6,153.7,156.6,98.2,0,135-70.4,140.8-106.9H248v-85.3h236.1c2.3,12.7,3.9,24.9,3.9,41.4h0Z"},null,-1),ae=[oe];function ne(w,v){return p(),b("svg",re,ae)}const te=$(se,[["render",ne]]),le={},ie={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 229.6 223.66"},ue=t("path",{d:"M91.8,1.76C61.3,8.56,36.3,25.46,19.1,51.06c-30.1,45.1-24.1,105.6,14.3,144.2,11.5,11.6,29,22.8,42.2,27.1,4.9,1.6,5.5,1.6,7.7,.1,2.4-1.6,2.5-2,2.5-13.5v-11.8l-8.8,.5c-10.3,.5-18.3-1.3-23.1-5.4-1.7-1.4-5-6.2-7.3-10.6-3.8-7.4-6.6-10.8-14.4-17.7-2.6-2.3-2.7-2.4-.9-3.7,4.3-3.2,13-.1,18.5,6.5,9.6,11.7,13.3,14.8,18.8,16,4.9,1,9.4,.6,16.2-1.4,.9-.3,2.1-2.4,2.7-4.8,.6-2.3,2.2-5.8,3.5-7.7l2.4-3.5-8.1-1.6c-17-3.5-27.5-9.6-34.4-20-6.4-9.6-8.5-17.9-8.6-33.4,0-14.6,1.6-20.6,7.9-28.8,2.8-3.6,3.1-4.7,2.3-6.8-1.5-3.6-1.1-18.8,.5-23.4,1.3-3.4,2-4,4.7-4.3,4.5-.5,12.9,2.4,21.4,7.2l7.3,4.2,6.4-1.5c9.1-2.1,36.4-2,44.6,0l6.2,1.6,5.8-3.5c7.7-4.6,17.5-8.2,22.4-8.2,3.9,0,3.9,.1,5.5,5.2,1.7,5.9,2,16.6,.5,21.7-.8,3-.6,3.9,1.6,6.8,10.9,14.4,12.1,38.3,2.9,57.9-6.2,12.9-19.3,21.9-36.9,25.2l-8.4,1.6,3.1,5.5,3.2,5.6,.3,22.3,.4,22.3,2.5,1.6c2.3,1.5,2.8,1.5,7.6-.2,8-2.7,21.7-10.1,29.2-15.8,44.6-33.4,59-93.3,34.3-143.1-14.5-29.3-41.9-51.8-73.3-60.2-13.7-3.6-39.5-4.4-52.5-1.5Z"},null,-1),ce=[ue];function de(w,v){return p(),b("svg",ie,ce)}const me=$(le,[["render",de]]);const g=w=>(K("data-v-272f2d72"),w=w(),Q(),w),pe={class:"element"},ve={class:"form"},ge={key:0,class:"auth-container"},we=["onSubmit"],_e=g(()=>t("h3",null,"Account Login",-1)),fe=g(()=>t("div",{class:"or-separator"},[t("span",null,"or")],-1)),he=g(()=>t("span",null,"login with google",-1)),be=g(()=>t("span",null,"login with github",-1)),ye={key:1,class:"auth-container"},ke=["onSubmit"],Ce=g(()=>t("h3",null,"Account Registration",-1)),Ae=g(()=>t("div",{class:"or-separator"},[t("span",null,"or")],-1)),$e={key:2,class:"auth-container"},Be=["onSubmit"],Ie=g(()=>t("h3",null,"Password Recovery",-1)),Pe=g(()=>t("div",{class:"or-separator"},[t("span",null,"or")],-1)),xe={__name:"AccountHandler",setup(w){const{bannerOptions:v,displayBanner:_,closeBanner:E}=q(),x=Z(),e=B({email:{value:"",error:"",success:""},password:{value:"",error:"",success:""},confirmPassword:{value:"",error:"",success:""},nickname:{value:"",error:"",success:""},successTimeoutId:null,result:null}),r=B({email:{value:"",error:"",success:""},password:{value:"",error:"",success:""},successTimeoutId:null,result:null}),l=B({email:{value:"",error:"",success:""},successTimeoutId:null,result:null});z(()=>[r.email.value,r.password.value,e.email.value,e.password.value,l.email.value],()=>{r.email.error&&r.email.value!==""&&(r.email.error=""),r.password.error&&r.password.value!==""&&(r.password.error=""),e.email.error&&e.email.value!==""&&(e.email.error=""),e.password.error&&e.password.value!==""&&(e.password.error=""),l.email.error&&l.email.value!==""&&(l.email.error="")}),G(async()=>{const o=await H();console.log("mounted"),o&&o.success!==""&&x.setUserAccount(o.success)});async function L(){r.result=null,r.email.error="",r.password.error="",r.email.success="",r.password.success="";const o=r.password.value,s=r.email.value;let a=!1;if((o.length<8||o.length>64)&&(setTimeout(()=>{r.password.error="Password invalid"},1),a=!0),(!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(s)||s.length>64)&&(setTimeout(()=>{r.email.error="Email address invalid"},1),a=!0),!a)try{const i=await F(r.email.value,r.password.value);if(i.error&&i.error!=="")_({message:i.error,type:"error",animate:!0});else{x.setUserAccount(i.success);const f=i.success.user_metadata.full_name||i.success.user_metadata.nickname;_({message:`You are now logged in as <strong>${f}</strong>`,type:"success",animate:!0})}}catch(i){console.error("App error => Login: ",i)}}async function N(){e.result=null,e.nickname.error="",e.email.error="",e.password.error="",e.confirmPassword.error="",e.nickname.success="",e.email.success="",e.password.success="",e.confirmPassword.success="";const o=e.nickname.value,s=e.password.value,a=e.confirmPassword.value,i=e.email.value;let f=!1;if((o.length<2||o.length>24||!/^[\w\s]+$/.test(o))&&(setTimeout(()=>{e.nickname.error="Nickname invalid"},1),f=!0),(s.length<8||s.length>64)&&(setTimeout(()=>{e.password.error="Invalid password length"},1),f=!0),(a!==s||a==="")&&(setTimeout(()=>{e.confirmPassword.error="Passwords do not match"},1),f=!0),(!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(i)||i.length>64)&&(setTimeout(()=>{e.email.error="Email address invalid"},1),f=!0),!f)try{const k=await O(i,s,o);k.error&&k.error!==""?_({message:k.error,type:"error",animate:!0}):(y.value="login",r.email.value=e.email.value,r.password.value=e.password.value,_({message:"Your account was successfully created! You can now login",type:"success",animate:!0}))}catch(k){console.error("An app error occurred:",k)}}async function V(){l.result=null,l.email.error="",l.email.success="";const o=l.email.value;if(!/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(o)||o.length>64){l.email.error="Email address invalid";return}try{const s=await D(o);s.error&&s.error!==""?_({message:s.error,type:"error",animate:!0}):_({message:"A recovery link was sent to your email address",type:"info",action:"login",animate:!0}),console.log("recovery: ",l.result)}catch(s){console.error("An app error occurred:",s)}}function R(){try{J();for(const o of[r,e,l])for(const s of Object.keys(o))s!=="successTimeoutId"&&(o[s].value="",o[s].error="",o[s].success="")}catch(o){console.error("An app error occurred:",o)}}const y=M("login");function A(o){y.value=o}return(o,s)=>(p(),b(j,null,[t("div",pe,[t("div",ve,[n(T,{name:"slide-fade",mode:"out-in"},{default:c(()=>[y.value==="login"?(p(),b("div",ge,[t("form",{onSubmit:d(L,["prevent"])},[_e,n(h,{id:"user-email",label:"Email address",error:r.email.error,success:r.email.success,icon:"email",value:r.email.value,"onUpdate:value":s[0]||(s[0]=a=>r.email.value=a)},null,8,["error","success","value"]),n(h,{id:"user-password",label:"Password",error:r.password.error,success:r.password.success,icon:"lock",value:r.password.value,"onUpdate:value":s[1]||(s[1]=a=>r.password.value=a),action:"",onAction:s[2]||(s[2]=a=>A("recovery")),"action-type":"large","action-label":"help"},null,8,["error","success","value"]),n(m,{id:"login-submit",color:"default",value:"login"}),n(m,{id:"logout-submit",color:"orange",button:"",onClick:d(R,["prevent"])},{button:c(()=>[C("logout")]),_:1},8,["onClick"]),fe,n(m,{id:"login-google",color:"blue",button:"",onClick:d(u(I),["prevent"])},{button:c(()=>[n(te),he]),_:1},8,["onClick"]),n(m,{id:"login-github",color:"blue",button:"",onClick:d(u(P),["prevent"])},{button:c(()=>[n(me),be]),_:1},8,["onClick"]),t("span",{class:"auth-option go-signup",onClick:s[3]||(s[3]=a=>A("signup"))},"I'm a pleb and I don't have an account yet")],40,we)])):y.value==="signup"?(p(),b("div",ye,[t("form",{onSubmit:d(N,["prevent"])},[Ce,n(h,{id:"user-nickname",label:"Nickname",error:e.nickname.error,success:e.nickname.success,icon:"people",value:e.nickname.value,"onUpdate:value":s[4]||(s[4]=a=>e.nickname.value=a)},null,8,["error","success","value"]),n(h,{id:"user-email",label:"Email address",error:e.email.error,success:e.email.success,icon:"email",value:e.email.value,"onUpdate:value":s[5]||(s[5]=a=>e.email.value=a)},null,8,["error","success","value"]),n(h,{id:"user-password",label:"Password",error:e.password.error,success:e.password.success,icon:"lock",value:e.password.value,"onUpdate:value":s[6]||(s[6]=a=>e.password.value=a)},null,8,["error","success","value"]),n(h,{id:"user-password-confirm",label:"Confirm password",error:e.confirmPassword.error,success:e.confirmPassword.success,icon:"lock",value:e.confirmPassword.value,"onUpdate:value":s[7]||(s[7]=a=>e.confirmPassword.value=a)},null,8,["error","success","value"]),n(m,{id:"signup-submit",color:"orange",value:"sign up"}),Ae,n(m,{id:"signup-google",color:"blue",button:"",onClick:d(u(I),["prevent"])},{button:c(()=>[C("signup with google")]),_:1},8,["onClick"]),n(m,{id:"signup-github",color:"blue",button:"",onClick:d(u(P),["prevent"])},{button:c(()=>[C("signup with github")]),_:1},8,["onClick"]),t("span",{class:"auth-option go-login",onClick:s[8]||(s[8]=a=>A("login"))},"I'm not a pleb and I already have an account")],40,ke)])):y.value==="recovery"?(p(),b("div",$e,[t("form",{onSubmit:d(V,["prevent"])},[Ie,n(h,{id:"user-email-recovery",label:"Email address",error:l.email.error,success:l.email.success,icon:"email",value:l.email.value,"onUpdate:value":s[9]||(s[9]=a=>l.email.value=a)},null,8,["error","success","value"]),n(m,{id:"recovery-submit",color:"orange",value:"recover password"}),Pe,n(m,{id:"recovery-google",color:"blue",button:"",onClick:d(u(I),["prevent"])},{button:c(()=>[C("recover with google")]),_:1},8,["onClick"]),n(m,{id:"recovery-github",color:"blue",button:"",onClick:d(u(P),["prevent"])},{button:c(()=>[C("recover with github")]),_:1},8,["onClick"]),t("span",{class:"auth-option go-login",onClick:s[10]||(s[10]=a=>A("login"))},"I'm no longer a pleb and I'm ready to login")],40,Be)])):S("",!0)]),_:1})])]),(p(),U(Y,{to:"#app"},[n(T,{name:"banner",mode:"out-in"},{default:c(()=>[u(v).visibility?(p(),U(W,{key:0,onBannerClose:u(E),message:u(v).message,action:u(v).action,animate:u(v).animate,type:u(v).type},null,8,["onBannerClose","message","action","animate","type"])):S("",!0)]),_:1})]))],64))}},Se=$(xe,[["__scopeId","data-v-272f2d72"]]);const Te={class:"view-wrapper"},Ue={__name:"AccountView",setup(w){return(v,_)=>(p(),b("div",Te,[n(X,{full:"",grow:""},{container:c(()=>[n(ee,null,{card:c(()=>[n(Se)]),_:1})]),_:1})]))}},Le=$(Ue,[["__scopeId","data-v-1ac4d140"]]);export{Le as default};
