import{_ as h,o as p,c as f,a as l,G as B,u as E,r as $,w as C,b as H,d as i,B as _,e as w,f as v,g,h as d,i as U,j as Z,l as R,p as A,k as I,s as G,m as V,n as N,q as M,t as O,v as k,T as P,x as W,y as Y,z as D,A as j,C as q,D as F}from"./index-8b308b50.js";const J={},K={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 496"},Q=l("path",{d:"M488,253.8c0,141.5-96.9,242.2-240,242.2S0,385.2,0,248,110.8,0,248,0c66.8,0,123,24.5,166.3,64.9l-67.5,64.9c-88.3-85.2-252.5-21.2-252.5,118.2,0,86.5,69.1,156.6,153.7,156.6,98.2,0,135-70.4,140.8-106.9H248v-85.3h236.1c2.3,12.7,3.9,24.9,3.9,41.4h0Z"},null,-1),X=[Q];function ee(c,u){return p(),f("svg",K,X)}const z=h(J,[["render",ee]]),re={},oe={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 229.6 223.66"},se=l("path",{d:"M91.8,1.76C61.3,8.56,36.3,25.46,19.1,51.06c-30.1,45.1-24.1,105.6,14.3,144.2,11.5,11.6,29,22.8,42.2,27.1,4.9,1.6,5.5,1.6,7.7,.1,2.4-1.6,2.5-2,2.5-13.5v-11.8l-8.8,.5c-10.3,.5-18.3-1.3-23.1-5.4-1.7-1.4-5-6.2-7.3-10.6-3.8-7.4-6.6-10.8-14.4-17.7-2.6-2.3-2.7-2.4-.9-3.7,4.3-3.2,13-.1,18.5,6.5,9.6,11.7,13.3,14.8,18.8,16,4.9,1,9.4,.6,16.2-1.4,.9-.3,2.1-2.4,2.7-4.8,.6-2.3,2.2-5.8,3.5-7.7l2.4-3.5-8.1-1.6c-17-3.5-27.5-9.6-34.4-20-6.4-9.6-8.5-17.9-8.6-33.4,0-14.6,1.6-20.6,7.9-28.8,2.8-3.6,3.1-4.7,2.3-6.8-1.5-3.6-1.1-18.8,.5-23.4,1.3-3.4,2-4,4.7-4.3,4.5-.5,12.9,2.4,21.4,7.2l7.3,4.2,6.4-1.5c9.1-2.1,36.4-2,44.6,0l6.2,1.6,5.8-3.5c7.7-4.6,17.5-8.2,22.4-8.2,3.9,0,3.9,.1,5.5,5.2,1.7,5.9,2,16.6,.5,21.7-.8,3-.6,3.9,1.6,6.8,10.9,14.4,12.1,38.3,2.9,57.9-6.2,12.9-19.3,21.9-36.9,25.2l-8.4,1.6,3.1,5.5,3.2,5.6,.3,22.3,.4,22.3,2.5,1.6c2.3,1.5,2.8,1.5,7.6-.2,8-2.7,21.7-10.1,29.2-15.8,44.6-33.4,59-93.3,34.3-143.1-14.5-29.3-41.9-51.8-73.3-60.2-13.7-3.6-39.5-4.4-52.5-1.5Z"},null,-1),ae=[se];function ne(c,u){return p(),f("svg",oe,ae)}const L=h(re,[["render",ne]]);const b=c=>(A("data-v-eadc1fb3"),c=c(),I(),c),te={class:"element"},ie=["onSubmit"],le={class:"auth-container"},ce=b(()=>l("h3",null,"Account Login",-1)),ue=b(()=>l("div",{class:"or-separator"},[l("span",null,"or")],-1)),de=b(()=>l("span",null,"login with google",-1)),me=b(()=>l("span",null,"login with github",-1)),pe={__name:"LoginHandler",emits:["auth-window","banner"],setup(c,{emit:u}){const e=new B({APIUrl:"https://crisp-sandbox.netlify.app/.netlify/identity",setCookie:!0}),m=E(),r=$({email:{value:"",error:""},password:{value:"",error:""}});C(()=>[r.email.value,r.password.value],([s,a],[n,t])=>{s!==n&&r.email.error&&(r.email.error=""),a!==t&&r.password.error&&(r.password.error="")});async function o(){r.email.error="",r.password.error="";const s=r.email.value,a=r.password.value;let n=!1;if((a.length<8||a.length>64)&&(setTimeout(()=>{r.password.error="Password invalid"},1),n=!0),(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(s)||s.length>64)&&(setTimeout(()=>{r.email.error="Email address invalid"},1),n=!0),!n)try{const t=await R(r.email.value,r.password.value);t.error&&t.error!==""?u("banner",{message:t.error,type:"error",animate:!0}):(window.sessionStorage.setItem("loggedIn","true"),m.push({name:"dashboard"}).then(()=>m.go()))}catch(t){console.error("App error => Login: ",t)}}return H(()=>{e.value=new B({APIUrl:"https://crisp-sandbox.netlify.app/.netlify/identity",setCookie:!0});const s=window.location.hash.substring(1),a=new URLSearchParams(s);if(a.has("access_token")){const n=a.get("access_token");e.value.createUser({access_token:n})}}),(s,a)=>(p(),f("div",te,[l("form",{onSubmit:g(o,["prevent"])},[l("div",le,[ce,i(_,{id:"user-email",label:"Email address",error:r.email.error,success:r.email.success,icon:"email",value:r.email.value,"onUpdate:value":a[0]||(a[0]=n=>r.email.value=n)},null,8,["error","success","value"]),i(_,{id:"user-password",label:"Password",error:r.password.error,success:r.password.success,icon:"lock",value:r.password.value,"onUpdate:value":a[1]||(a[1]=n=>r.password.value=n),action:"",onAction:a[2]||(a[2]=n=>s.$emit("auth-window","recovery")),"action-type":"large","action-label":"help",type:"password"},null,8,["error","success","value"]),i(w,{id:"login-submit",color:"orange",value:"login"}),ue,i(w,{id:"login-google",color:"blue",button:"",onClick:g(d(U),["prevent"])},{button:v(()=>[i(z),de]),_:1},8,["onClick"]),i(w,{id:"login-github",color:"blue",button:"",onClick:g(d(Z),["prevent"])},{button:v(()=>[i(L),me]),_:1},8,["onClick"]),l("span",{class:"auth-option go-signup",onClick:a[3]||(a[3]=n=>s.$emit("auth-window","signup"))},"I'm a pleb and I don't have an account yet")])],40,ie)]))}},x=h(pe,[["__scopeId","data-v-eadc1fb3"]]);const y=c=>(A("data-v-993cb259"),c=c(),I(),c),ve={class:"element"},_e=["onSubmit"],we={class:"auth-container"},ge=y(()=>l("h3",null,"Account Registration",-1)),he=y(()=>l("div",{class:"or-separator"},[l("span",null,"or")],-1)),fe=y(()=>l("span",null,"Signup with google",-1)),be=y(()=>l("span",null,"Signup with github",-1)),ye={__name:"SignupHandler",emits:["auth-window","banner"],setup(c,{emit:u}){const e=$({email:{value:"",error:""},password:{value:"",error:""},confirmPassword:{value:"",error:""},nickname:{value:"",error:""}});C(()=>[e.email.value,e.nickname.value,e.password.value,e.confirmPassword.value],([r,o,s,a],[n,t,S,T])=>{r!==n&&e.email.error&&(e.email.error=""),o!==t&&e.nickname.error&&(e.nickname.error=""),s!==S&&e.password.error&&(e.password.error=""),a!==T&&e.confirmPassword.error&&(e.confirmPassword.error="")});async function m(){e.result=null,e.nickname.error="",e.email.error="",e.password.error="",e.confirmPassword.error="";const r=e.nickname.value,o=e.password.value,s=e.confirmPassword.value,a=e.email.value;let n=!1;if((r.length<2||r.length>24||!/^[\w\s]+$/.test(r))&&(setTimeout(()=>{e.nickname.error="Nickname invalid"},1),n=!0),(o.length<8||o.length>64)&&(setTimeout(()=>{e.password.error="Invalid password length"},1),n=!0),(s!==o||s==="")&&(setTimeout(()=>{e.confirmPassword.error="Passwords do not match"},1),n=!0),(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(a)||a.length>64)&&(setTimeout(()=>{e.email.error="Email address invalid"},1),n=!0),!n)try{const t=await G(a,o,r);t.error&&t.error!==""?u("banner",{message:t.error,type:"error",animate:!0}):(u("auth-window","login"),u("banner",{message:"Your account was successfully created! You can now login",type:"success",animate:!0}))}catch(t){console.error("An app error occurred:",t)}}return(r,o)=>(p(),f("div",ve,[l("form",{onSubmit:g(m,["prevent"])},[l("div",we,[ge,i(_,{id:"user-nickname",label:"Nickname",error:e.nickname.error,success:e.nickname.success,icon:"people",value:e.nickname.value,"onUpdate:value":o[0]||(o[0]=s=>e.nickname.value=s)},null,8,["error","success","value"]),i(_,{id:"user-email",label:"Email address",error:e.email.error,success:e.email.success,icon:"email",value:e.email.value,"onUpdate:value":o[1]||(o[1]=s=>e.email.value=s)},null,8,["error","success","value"]),i(_,{id:"user-password",label:"Password",error:e.password.error,success:e.password.success,icon:"lock",value:e.password.value,"onUpdate:value":o[2]||(o[2]=s=>e.password.value=s),type:"password"},null,8,["error","success","value"]),i(_,{id:"user-password-confirm",label:"Confirm password",error:e.confirmPassword.error,success:e.confirmPassword.success,icon:"lock",value:e.confirmPassword.value,"onUpdate:value":o[3]||(o[3]=s=>e.confirmPassword.value=s),type:"password"},null,8,["error","success","value"]),i(w,{id:"signup-submit",color:"orange",value:"sign up"}),he,i(w,{id:"login-google",color:"blue",button:"",onClick:g(d(U),["prevent"])},{button:v(()=>[i(z),fe]),_:1},8,["onClick"]),i(w,{id:"login-github",color:"blue",button:"",onClick:g(d(Z),["prevent"])},{button:v(()=>[i(L),be]),_:1},8,["onClick"]),l("span",{class:"auth-option go-login",onClick:o[4]||(o[4]=s=>r.$emit("auth-window","login"))},"I'm not a pleb and I already have an account")])],40,_e)]))}},ke=h(ye,[["__scopeId","data-v-993cb259"]]);const $e=c=>(A("data-v-0b3548ee"),c=c(),I(),c),Ce={class:"element"},Ae=["onSubmit"],Ie={class:"auth-container"},Se=$e(()=>l("h3",null,"Password Recovery",-1)),Be={__name:"RecoveryHandler",emits:["auth-window","banner"],setup(c,{emit:u}){const e=$({email:{value:"",error:""}});C(()=>[e.email.value],([r],[o])=>{r!==o&&e.email.error&&(e.email.error="")});async function m(){e.email.error="";const r=e.email.value;if(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(r)||r.length>64){e.email.error="Email address invalid";return}try{const o=await V(r);o.error&&o.error!==""?u("banner",{message:o.error,type:"error",animate:!0}):u("banner",{message:"A recovery link was sent to your email address",type:"info",action:"login",animate:!0})}catch(o){console.error("An app error occurred:",o)}}return(r,o)=>(p(),f("div",Ce,[l("form",{onSubmit:g(m,["prevent"])},[l("div",Ie,[Se,i(_,{id:"user-email-recovery",label:"Email address",error:e.email.error,success:e.email.success,icon:"email",value:e.email.value,"onUpdate:value":o[0]||(o[0]=s=>e.email.value=s)},null,8,["error","success","value"]),i(w,{id:"recovery-submit",color:"orange",value:"recover password"}),l("span",{class:"auth-option go-login",onClick:o[1]||(o[1]=s=>r.$emit("auth-window","login"))},"I'm no longer a pleb and I'm ready to login")])],40,Ae)]))}},Pe=h(Be,[["__scopeId","data-v-0b3548ee"]]);const xe={class:"view-wrapper"},He={__name:"AccountView",setup(c){const{bannerOptions:u,displayBanner:e,closeBanner:m}=Y(),r=N("login");function o(t){r.value=t}const s=M(()=>{switch(r.value){case"login":return x;case"signup":return ke;case"recovery":return Pe;default:return x}});function a(t){e(t)}function n(t){t==="login"&&(o(t),m())}return H(()=>{window.sessionStorage.getItem("loggedOut")&&(e({message:"You are now logged out. Authenticate again to access the dashboard",type:"warning",animate:!0}),window.sessionStorage.removeItem("loggedOut"))}),(t,S)=>(p(),f("div",xe,[i(O,{full:"",grow:""},{container:v(()=>[i(D,null,{card:v(()=>[i(P,{name:"slide-fade",mode:"out-in"},{default:v(()=>[(p(),k(j(d(s)),{key:d(s),onAuthWindow:o,onBanner:a},null,32))]),_:1})]),_:1})]),_:1}),(p(),k(W,{to:"body"},[i(P,{name:"banner",mode:"out-in"},{default:v(()=>[d(u).visibility?(p(),k(q,{key:0,onBannerClose:d(m),onBannerAction:n,message:d(u).message,action:d(u).action,animate:d(u).animate,type:d(u).type},null,8,["onBannerClose","message","action","animate","type"])):F("",!0)]),_:1})]))]))}},Ze=h(He,[["__scopeId","data-v-d36f03e8"]]);export{Ze as default};
