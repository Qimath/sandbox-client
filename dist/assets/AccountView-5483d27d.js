import{_ as f,o as p,c as b,a as i,u as U,r as C,b as S,w as I,d as L,e as t,B as w,f as g,g as _,h,i as m,j as H,k as Z,l as V,p as A,m as P,s as N,n as G,q as M,t as O,v as W,x as $,T as B,y as Y,z as D,A as j,C as q,D as F,E as J}from"./index-b62cb194.js";const K={},Q={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 496"},X=i("path",{d:"M488,253.8c0,141.5-96.9,242.2-240,242.2S0,385.2,0,248,110.8,0,248,0c66.8,0,123,24.5,166.3,64.9l-67.5,64.9c-88.3-85.2-252.5-21.2-252.5,118.2,0,86.5,69.1,156.6,153.7,156.6,98.2,0,135-70.4,140.8-106.9H248v-85.3h236.1c2.3,12.7,3.9,24.9,3.9,41.4h0Z"},null,-1),ee=[X];function re(u,c){return p(),b("svg",Q,ee)}const z=f(K,[["render",re]]),oe={},se={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 229.6 223.66"},ae=i("path",{d:"M91.8,1.76C61.3,8.56,36.3,25.46,19.1,51.06c-30.1,45.1-24.1,105.6,14.3,144.2,11.5,11.6,29,22.8,42.2,27.1,4.9,1.6,5.5,1.6,7.7,.1,2.4-1.6,2.5-2,2.5-13.5v-11.8l-8.8,.5c-10.3,.5-18.3-1.3-23.1-5.4-1.7-1.4-5-6.2-7.3-10.6-3.8-7.4-6.6-10.8-14.4-17.7-2.6-2.3-2.7-2.4-.9-3.7,4.3-3.2,13-.1,18.5,6.5,9.6,11.7,13.3,14.8,18.8,16,4.9,1,9.4,.6,16.2-1.4,.9-.3,2.1-2.4,2.7-4.8,.6-2.3,2.2-5.8,3.5-7.7l2.4-3.5-8.1-1.6c-17-3.5-27.5-9.6-34.4-20-6.4-9.6-8.5-17.9-8.6-33.4,0-14.6,1.6-20.6,7.9-28.8,2.8-3.6,3.1-4.7,2.3-6.8-1.5-3.6-1.1-18.8,.5-23.4,1.3-3.4,2-4,4.7-4.3,4.5-.5,12.9,2.4,21.4,7.2l7.3,4.2,6.4-1.5c9.1-2.1,36.4-2,44.6,0l6.2,1.6,5.8-3.5c7.7-4.6,17.5-8.2,22.4-8.2,3.9,0,3.9,.1,5.5,5.2,1.7,5.9,2,16.6,.5,21.7-.8,3-.6,3.9,1.6,6.8,10.9,14.4,12.1,38.3,2.9,57.9-6.2,12.9-19.3,21.9-36.9,25.2l-8.4,1.6,3.1,5.5,3.2,5.6,.3,22.3,.4,22.3,2.5,1.6c2.3,1.5,2.8,1.5,7.6-.2,8-2.7,21.7-10.1,29.2-15.8,44.6-33.4,59-93.3,34.3-143.1-14.5-29.3-41.9-51.8-73.3-60.2-13.7-3.6-39.5-4.4-52.5-1.5Z"},null,-1),ne=[ae];function te(u,c){return p(),b("svg",se,ne)}const E=f(oe,[["render",te]]);const y=u=>(A("data-v-49de2557"),u=u(),P(),u),ie={class:"element"},le=["onSubmit"],ce={class:"auth-container"},ue=y(()=>i("h3",null,"Account Login",-1)),de=y(()=>i("div",{class:"or-separator"},[i("span",null,"or")],-1)),me=y(()=>i("span",null,"login with google",-1)),pe=y(()=>i("span",null,"login with github",-1)),ve={__name:"LoginHandler",emits:["auth-window","banner"],setup(u,{emit:c}){const e=U(),s=C({email:{value:"",error:""},password:{value:"",error:""}});S(async()=>{new URLSearchParams(window.location.search).has("access_token")&&(console.log("mountedCheck"),await o())}),I(()=>[s.email.value,s.password.value],([r,a],[l,n])=>{r!==l&&s.email.error&&(s.email.error=""),a!==n&&s.password.error&&(s.password.error="")});async function d(){s.email.error="",s.password.error="";const r=s.email.value,a=s.password.value;let l=!1;if((a.length<8||a.length>64)&&(setTimeout(()=>{s.password.error="Password invalid"},1),l=!0),(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(r)||r.length>64)&&(setTimeout(()=>{s.email.error="Email address invalid"},1),l=!0),!l)try{const n=await V(s.email.value,s.password.value);n.error&&n.error!==""?c("banner",{message:n.error,type:"error",animate:!0}):(window.sessionStorage.setItem("loggedIn","true"),e.push({name:"dashboard"}).then(()=>e.go()))}catch(n){console.error("App error => Login: ",n)}}async function o(){try{const r=await L();r.error&&r.error!==""?c("banner",{message:r.error,type:"error",animate:!0}):(window.sessionStorage.setItem("loggedIn","true"),e.push({name:"dashboard"}).then(()=>e.go()))}catch(r){console.error("App error => Login: ",r)}}return(r,a)=>(p(),b("div",ie,[i("form",{onSubmit:h(d,["prevent"])},[i("div",ce,[ue,t(w,{id:"user-email",label:"Email address",error:s.email.error,success:s.email.success,icon:"email",value:s.email.value,"onUpdate:value":a[0]||(a[0]=l=>s.email.value=l)},null,8,["error","success","value"]),t(w,{id:"user-password",label:"Password",error:s.password.error,success:s.password.success,icon:"lock",value:s.password.value,"onUpdate:value":a[1]||(a[1]=l=>s.password.value=l),action:"",onAction:a[2]||(a[2]=l=>r.$emit("auth-window","recovery")),"action-type":"large","action-label":"help",type:"password"},null,8,["error","success","value"]),t(g,{id:"login-submit",color:"orange",value:"login"}),de,t(g,{id:"login-google",color:"blue",button:"",onClick:h(m(H),["prevent"])},{button:_(()=>[t(z),me]),_:1},8,["onClick"]),t(g,{id:"login-github",color:"blue",button:"",onClick:h(m(Z),["prevent"])},{button:_(()=>[t(E),pe]),_:1},8,["onClick"]),i("span",{class:"auth-option go-signup",onClick:a[3]||(a[3]=l=>r.$emit("auth-window","signup"))},"I'm a pleb and I don't have an account yet")])],40,le)]))}},x=f(ve,[["__scopeId","data-v-49de2557"]]);const k=u=>(A("data-v-e4ab1bc7"),u=u(),P(),u),_e={class:"element"},we=["onSubmit"],ge={class:"auth-container"},he=k(()=>i("h3",null,"Account Registration",-1)),fe=k(()=>i("div",{class:"or-separator"},[i("span",null,"or")],-1)),be=k(()=>i("span",null,"Signup with google",-1)),ye=k(()=>i("span",null,"Signup with github",-1)),ke={__name:"SignupHandler",emits:["auth-window","banner"],setup(u,{emit:c}){const e=C({email:{value:"",error:""},password:{value:"",error:""},confirmPassword:{value:"",error:""},nickname:{value:"",error:""}});S(async()=>{new URLSearchParams(window.location.search).has("access_token")&&await d()}),I(()=>[e.email.value,e.nickname.value,e.password.value,e.confirmPassword.value],([o,r,a,l],[n,v,R,T])=>{o!==n&&e.email.error&&(e.email.error=""),r!==v&&e.nickname.error&&(e.nickname.error=""),a!==R&&e.password.error&&(e.password.error=""),l!==T&&e.confirmPassword.error&&(e.confirmPassword.error="")});async function s(){e.result=null,e.nickname.error="",e.email.error="",e.password.error="",e.confirmPassword.error="";const o=e.nickname.value,r=e.password.value,a=e.confirmPassword.value,l=e.email.value;let n=!1;if((o.length<2||o.length>24||!/^[\w\s]+$/.test(o))&&(setTimeout(()=>{e.nickname.error="Nickname invalid"},1),n=!0),(r.length<8||r.length>64)&&(setTimeout(()=>{e.password.error="Invalid password length"},1),n=!0),(a!==r||a==="")&&(setTimeout(()=>{e.confirmPassword.error="Passwords do not match"},1),n=!0),(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(l)||l.length>64)&&(setTimeout(()=>{e.email.error="Email address invalid"},1),n=!0),!n)try{const v=await N(l,r,o);v.error&&v.error!==""?c("banner",{message:v.error,type:"error",animate:!0}):(c("auth-window","login"),c("banner",{message:"Your account was successfully created! You can now login",type:"success",animate:!0}))}catch(v){console.error("An app error occurred:",v)}}async function d(){try{const o=await L();o.error&&o.error!==""?c("banner",{message:o.error,type:"error",animate:!0}):(window.sessionStorage.setItem("loggedIn","true"),router.push({name:"dashboard"}).then(()=>router.go()))}catch(o){console.error("App error => Signup: ",o)}}return(o,r)=>(p(),b("div",_e,[i("form",{onSubmit:h(s,["prevent"])},[i("div",ge,[he,t(w,{id:"user-nickname",label:"Nickname",error:e.nickname.error,success:e.nickname.success,icon:"people",value:e.nickname.value,"onUpdate:value":r[0]||(r[0]=a=>e.nickname.value=a)},null,8,["error","success","value"]),t(w,{id:"user-email",label:"Email address",error:e.email.error,success:e.email.success,icon:"email",value:e.email.value,"onUpdate:value":r[1]||(r[1]=a=>e.email.value=a)},null,8,["error","success","value"]),t(w,{id:"user-password",label:"Password",error:e.password.error,success:e.password.success,icon:"lock",value:e.password.value,"onUpdate:value":r[2]||(r[2]=a=>e.password.value=a),type:"password"},null,8,["error","success","value"]),t(w,{id:"user-password-confirm",label:"Confirm password",error:e.confirmPassword.error,success:e.confirmPassword.success,icon:"lock",value:e.confirmPassword.value,"onUpdate:value":r[3]||(r[3]=a=>e.confirmPassword.value=a),type:"password"},null,8,["error","success","value"]),t(g,{id:"signup-submit",color:"orange",value:"sign up"}),fe,t(g,{id:"login-google",color:"blue",button:"",onClick:h(m(H),["prevent"])},{button:_(()=>[t(z),be]),_:1},8,["onClick"]),t(g,{id:"login-github",color:"blue",button:"",onClick:h(m(Z),["prevent"])},{button:_(()=>[t(E),ye]),_:1},8,["onClick"]),i("span",{class:"auth-option go-login",onClick:r[4]||(r[4]=a=>o.$emit("auth-window","login"))},"I'm not a pleb and I already have an account")])],40,we)]))}},$e=f(ke,[["__scopeId","data-v-e4ab1bc7"]]);const Ce=u=>(A("data-v-0b3548ee"),u=u(),P(),u),Se={class:"element"},Ie=["onSubmit"],Ae={class:"auth-container"},Pe=Ce(()=>i("h3",null,"Password Recovery",-1)),Be={__name:"RecoveryHandler",emits:["auth-window","banner"],setup(u,{emit:c}){const e=C({email:{value:"",error:""}});I(()=>[e.email.value],([d],[o])=>{d!==o&&e.email.error&&(e.email.error="")});async function s(){e.email.error="";const d=e.email.value;if(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(d)||d.length>64){e.email.error="Email address invalid";return}try{const o=await G(d);o.error&&o.error!==""?c("banner",{message:o.error,type:"error",animate:!0}):c("banner",{message:"A recovery link was sent to your email address",type:"info",action:"login",animate:!0})}catch(o){console.error("An app error occurred:",o)}}return(d,o)=>(p(),b("div",Se,[i("form",{onSubmit:h(s,["prevent"])},[i("div",Ae,[Pe,t(w,{id:"user-email-recovery",label:"Email address",error:e.email.error,success:e.email.success,icon:"email",value:e.email.value,"onUpdate:value":o[0]||(o[0]=r=>e.email.value=r)},null,8,["error","success","value"]),t(g,{id:"recovery-submit",color:"orange",value:"recover password"}),i("span",{class:"auth-option go-login",onClick:o[1]||(o[1]=r=>d.$emit("auth-window","login"))},"I'm no longer a pleb and I'm ready to login")])],40,Ie)]))}},xe=f(Be,[["__scopeId","data-v-0b3548ee"]]);const Le={class:"view-wrapper"},He={__name:"AccountView",setup(u){const{bannerOptions:c,displayBanner:e,closeBanner:s}=D(),d=M("login");function o(n){d.value=n}const r=O(()=>{switch(d.value){case"login":return x;case"signup":return $e;case"recovery":return xe;default:return x}});function a(n){e(n)}function l(n){n==="login"&&(o(n),s())}return S(()=>{window.sessionStorage.getItem("loggedOut")&&(e({message:"You are now logged out. Authenticate again to access the dashboard",type:"warning",animate:!0}),window.sessionStorage.removeItem("loggedOut"))}),(n,v)=>(p(),b("div",Le,[t(W,{full:"",grow:""},{container:_(()=>[t(j,null,{card:_(()=>[t(B,{name:"slide-fade",mode:"out-in"},{default:_(()=>[(p(),$(q(m(r)),{key:m(r),onAuthWindow:o,onBanner:a},null,32))]),_:1})]),_:1})]),_:1}),(p(),$(Y,{to:"body"},[t(B,{name:"banner",mode:"out-in"},{default:_(()=>[m(c).visibility?(p(),$(F,{key:0,onBannerClose:m(s),onBannerAction:l,message:m(c).message,action:m(c).action,animate:m(c).animate,type:m(c).type},null,8,["onBannerClose","message","action","animate","type"])):J("",!0)]),_:1})]))]))}},ze=f(He,[["__scopeId","data-v-d36f03e8"]]);export{ze as default};
