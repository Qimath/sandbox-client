import{K as W,_ as R,q as I,w as y,o as r,c as v,a as p,p as T,m as z,L as U,M as V,N as G,O as L,P as C,F as j,Q as K,r as q,t as k,b as D,R as Y,e as n,g as S,I as B,f as A,i as b,x as _,B as $,v as E,T as J,y as Q,z as X,A as w,D as Z,E as ee,S as te}from"./index-e62b555a.js";const ae=W({id:"settings",state:()=>({preferences:{themeDetect:{id:"preference-theme_detect",label:"Auto-detect theme preference",default:!0},themeSelected:{id:"prererence-theme_selected",label:"Theme currently active",default:"light"},localStorageClear:{id:"preference-storage",label:"Clear localStorage on session reset",default:!0},gtmEnable:{id:"preference-gtm_enable",label:"Enable Google Tag Manager",default:!1},gtmId:{id:"preference-gtm_id",label:"Set the GTM Container ID",desc:"GTM Container ID",default:""},mainWebsite:{id:"preference-main_website",label:"Current main website: ",default:{id:"e93e073a-1f69-4cbc-8934-f9e1611e65bb",name:"Staging"}}},options:{sessionMerge:{id:"setting-merge",label:"Merge token ID session when logging in",default:!0},lockMaximized:{id:"setting-maximized",label:"Prevent chatbox from being closed",default:!1},lockFullview:{id:"setting-fullview",label:"Enforce chatbox fullscreen mode",default:!1},safeMode:{id:"setting-safemode",label:"Activate the safeMode (no errors returned)",default:!1},cookieExpire:{id:"setting-cookie",desc:"Cookie expiration timer",label:"Set Cookie expiration date (default is 6 months)",default:null},locale:{id:"setting-locale",desc:"Chatbox locale",label:"Set chatbox language",default:null,languages:{"Auto-detect":null,Afrikaans:"af",Arabic:"ar","Arabic (United Arab Emirates)":"ar-AE","Arabic (Saudi Arabia)":"ar-SA","Arabic (Yemen)":"ar-YE",Armenian:"hy",Azerbaijani:"az",Basque:"eu",Bengali:"bn",Bulgarian:"bg",Catalan:"ca","Chinese (Simplified)":"zh-CN","Chinese (Traditional)":"zh-TW","Chinese (Hong-Kong)":"zh-HK",Croatian:"hr",Czech:"cs",Danish:"da",Dutch:"nl","Dutch (Belgium)":"nl-BE",English:"en",Esperanto:"eo",Estonian:"et",Faroese:"fo",Finnish:"fi",French:"fr",Georgian:"ka",German:"de",Greek:"el",Gujarati:"gu",Hebrew:"he",Hindi:"hi",Hungarian:"hu",Icelandic:"is",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Latvian:"lv",Lithuanian:"lt",Malay:"ms",Malayalam:"ml",Mongolian:"mn",Nepali:"ne",Norwegian:"no",Pashto:"ps",Persian:"fa",Polish:"pl",Portuguese:"pt","Portuguese (Brazil)":"pt-BR",Romanian:"ro",Russian:"ru",Serbian:"sr","Serbian (Cyrilic)":"sr-Cyrl",Slovak:"sk",Slovenian:"sl",Spanish:"es",Swedish:"sv",Thai:"th",Tamil:"ta",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi"}}},callbacks:{onSessionLoaded:{id:"callback-session-loaded",label:"Console callback on session loaded",default:!1},onChatInitiated:{id:"callback-chat-initiated",label:"Console callback on chat initiated",default:!1},onChatOpened:{id:"callback-chat-opened",label:"Console callback on chat opened",default:!1},onChatClosed:{id:"callback-chat-closed",label:"Console callback on chat closed",default:!1},onMessageSent:{id:"callback-message-sent",label:"Console callback on message sent",default:!1},onMessageReceived:{id:"callback-message-received",label:"Console callback on message received",default:!1},onNicknameChanged:{id:"callback-nickname-changed",label:"Console callback on nickname changed",default:!1},onEmailChanged:{id:"callback-email-changed",label:"Console callback on email changed",default:!1},onPhoneChanged:{id:"callback-phone-changed",label:"Console callback on phone changed",default:!1},onAvatarChanged:{id:"callback-avatar-changed",label:"Console callback on avatar changed",default:!1}}}),getters:{getSetting:a=>o=>{if(a.options.hasOwnProperty(o))return a.options[o];if(a.preferences.hasOwnProperty(o))return a.preferences[o];if(a.callbacks.hasOwnProperty(o))return a.callbacks[o];console.error(`App error [useSettingsStore]: Setting ${o} does not exist.`)},getPreferences:a=>()=>a.preferences,getOptions:a=>()=>a.options,getCallbacks:a=>()=>a.callbacks}});const ne=a=>(T("data-v-d68794fd"),a=a(),z(),a),se=["for"],ie=["id","checked"],le=ne(()=>p("div",{class:"slider"},null,-1)),oe={__name:"BaseCheck",props:{value:{type:Boolean,default:!1},id:{type:String,default:""},label:{type:String,default:""}},emits:["update:value"],setup(a,{emit:o}){const s=a,c=I(s.value);return y(()=>s.value,t=>{c.value=t}),y(c,t=>{o("update:value",t)}),(t,m)=>(r(),v("label",{class:"switch",for:a.id},[p("input",{id:a.id,type:"checkbox",checked:c.value,onInput:m[0]||(m[0]=e=>c.value=!c.value)},null,40,ie),le],8,se))}},re=R(oe,[["__scopeId","data-v-d68794fd"]]);const de=["id"],ce=["value"],ue=["for"],ge={__name:"BaseSelect",props:{options:{type:Object,default:()=>{}},id:{type:String,default:""},value:{type:String,default:""},label:{type:String,default:""}},emits:["update:value"],setup(a,{emit:o}){const s=a,c=I(s.value);return y(c,t=>{o("update:value",t)}),y(()=>s.value,t=>{c.value=t},{immediate:!0}),(t,m)=>(r(),v("div",null,[U(p("select",{id:a.id,"onUpdate:modelValue":m[0]||(m[0]=e=>c.value=e)},[(r(!0),v(G,null,L(a.options,(e,d)=>(r(),v("option",{value:e,key:e},C(d),9,ce))),128))],8,de),[[V,c.value]]),p("label",{for:a.id},C(a.label),9,ue)]))}},fe=R(ge,[["__scopeId","data-v-f8650bf1"]]);const me=a=>(T("data-v-6f4f0cd1"),a=a(),z(),a),be={class:"element"},pe={class:"form"},ve={key:0,class:"setting-container"},Se=me(()=>p("div",{class:"label"},[p("label",{for:"reset-settings"},"Restore default settings")],-1)),he={class:"setting-item"},ke={key:1,class:"setting-container"},_e={class:"label"},ye=["for"],Ce=["for"],we={class:"setting-item"},Be={__name:"SettingsHandler",props:{setting:{type:String,default:""},reset:{type:Boolean,default:!1}},emits:["settings-result","reset-settings"],setup(a,{emit:o}){const s=a,c=ae(),t=j(),m=K(),e=q({value:"",error:"",success:""}),d=k(()=>m.getWebsiteId),g=k(()=>m.getConfig.website),P=k(()=>m.getWebsiteValidity()),N=k(()=>s.setting==="cookieExpire"),H=k(()=>s.setting==="locale"),O=k(()=>s.setting==="gtmId"),x=k(()=>s.setting==="mainWebsite"),M=I(!1);D(async()=>{if(!s.reset){const f=t.getSetting(s.setting),i=s.setting;Object.assign(e,{value:f,name:i},c.getSetting(s.setting))}await Y(),M.value=!0});function F(){P.value?(e.value={id:d,name:g},h(e.name,e.value)):(e.error=`Website ID <strong>${d.value}</strong> is not valid. Cannot be set as main website.`,o("settings-result",e))}async function h(f,i){if(M.value){e.success="",e.error="";try{await t.setSetting(f,i),e.success=`Setting ${f} updated successfully!`}catch(u){e.error=u.message}finally{o("settings-result",e)}}}return y(()=>{if(s.setting)return t.getSetting(s.setting)},f=>{f!==void 0&&(e.value=f)}),y(()=>t.options.lockMaximized,f=>{f&&h("lockFullview",!1)}),y(()=>t.options.lockFullview,f=>{f&&h("lockMaximized",!1)}),(f,i)=>(r(),v("div",be,[p("div",pe,[a.reset?(r(),v("div",ve,[Se,p("div",he,[n(A,{id:"reset-settings",color:"red",onClick:i[0]||(i[0]=u=>f.$emit("reset-settings")),button:""},{button:S(()=>[B("reset settings")]),_:1})])])):(r(),v("div",ke,[p("div",_e,[b(x)?(r(),v("label",{key:0,for:e.id},[B(C(e.label)+" ",1),p("strong",null,C(e.value.name),1)],8,ye)):(r(),v("label",{key:1,for:e.id},C(e.label),9,Ce))]),p("div",we,[b(H)?(r(),_(fe,{key:0,id:e.id,value:e.value,"onUpdate:value":[i[1]||(i[1]=u=>e.value=u),i[2]||(i[2]=u=>h(e.name,e.value))],options:e.languages,label:e.desc},null,8,["id","value","options","label"])):b(N)?(r(),_($,{key:1,id:e.id,label:e.desc,value:e.value,"onUpdate:value":[i[3]||(i[3]=u=>e.value=u),i[4]||(i[4]=u=>h(e.name,e.value))],type:"number"},null,8,["id","label","value"])):b(O)?(r(),_($,{key:2,id:e.id,label:e.desc,value:e.value,"onUpdate:value":[i[5]||(i[5]=u=>e.value=u),i[6]||(i[6]=u=>h(e.name,e.value))]},null,8,["id","label","value"])):b(x)?(r(),_(A,{key:3,id:e.id,color:"green",onClick:F,button:""},{button:S(()=>[B("set main website")]),_:1},8,["id"])):(r(),_(re,{key:4,id:e.id,label:e.label,value:e.value,"onUpdate:value":[i[7]||(i[7]=u=>e.value=u),i[8]||(i[8]=u=>h(e.name,e.value))]},null,8,["id","label","value"]))])]))])]))}},l=R(Be,[["__scopeId","data-v-6f4f0cd1"]]),Re={class:"view-wrapper"},xe={__name:"SettingsView",setup(a){const{bannerOptions:o,displayBanner:s,closeBanner:c}=X();function t(d){let g="";d.error&&d.error!==""?g="error":d.error===""&&d.success&&d.success!==""&&(g="success"),g==="error"?s({message:"There was an error saving these settings: "+d.error,type:"error",animate:!0}):g==="success"&&s({message:"Settings saved successfully! Some changes require the app to be restarted.",type:"info",action:"reload",animate:!1})}function m(d){d==="reload"&&(window.sessionStorage.setItem("settingsSaved","true"),window.location.reload())}async function e(){const d={preferences:null,options:null,callbacks:null};try{const g=await te(d);g.error&&g.error!==""?s({message:g.error,type:"error",animate:!0}):(window.sessionStorage.removeItem("settingsSaved"),window.sessionStorage.setItem("settingsReset","true"),window.location.reload())}catch(g){console.error("App error => Reset: ",g)}}return D(()=>{window.sessionStorage.getItem("settingsSaved")&&(s({message:"Settings have been applied and loaded successfully!",type:"success",animate:!0}),window.sessionStorage.removeItem("settingsSaved")),window.sessionStorage.getItem("settingsReset")&&(s({message:"Default settings have been restored.",type:"warning",animate:!0}),window.sessionStorage.removeItem("settingsReset"))}),(d,g)=>(r(),v("div",Re,[n(E,{grow:""},{container:S(()=>[n(w,null,{card:S(()=>[n(l,{setting:"themeDetect",onSettingsResult:t}),n(l,{setting:"localStorageClear",onSettingsResult:t}),n(l,{setting:"gtmEnable",onSettingsResult:t}),n(l,{setting:"gtmId",onSettingsResult:t}),n(l,{setting:"mainWebsite",onSettingsResult:t})]),_:1}),n(w,null,{card:S(()=>[n(l,{setting:"sessionMerge",onSettingsResult:t}),n(l,{setting:"lockMaximized",onSettingsResult:t}),n(l,{setting:"lockFullview",onSettingsResult:t}),n(l,{setting:"safeMode",onSettingsResult:t}),n(l,{setting:"cookieExpire",onSettingsResult:t}),n(l,{setting:"locale",onSettingsResult:t})]),_:1}),n(w,null,{card:S(()=>[n(l,{reset:"",onResetSettings:e})]),_:1})]),_:1}),n(E,{grow:""},{container:S(()=>[n(w,null,{card:S(()=>[n(l,{setting:"onSessionLoaded",onSettingsResult:t}),n(l,{setting:"onChatInitiated",onSettingsResult:t}),n(l,{setting:"onChatOpened",onSettingsResult:t}),n(l,{setting:"onChatClosed",onSettingsResult:t}),n(l,{setting:"onMessageSent",onSettingsResult:t}),n(l,{setting:"onMessageReceived",onSettingsResult:t}),n(l,{setting:"onNicknameChanged",onSettingsResult:t}),n(l,{setting:"onEmailChanged",onSettingsResult:t}),n(l,{setting:"onPhoneChanged",onSettingsResult:t}),n(l,{setting:"onAvatarChanged",onSettingsResult:t})]),_:1})]),_:1}),(r(),_(Q,{to:"body"},[n(J,{name:"banner",mode:"out-in"},{default:S(()=>[b(o).visibility?(r(),_(Z,{key:0,onBannerClose:b(c),onBannerAction:m,message:b(o).message,action:b(o).action,animate:b(o).animate,type:b(o).type},null,8,["onBannerClose","message","action","animate","type"])):ee("",!0)]),_:1})]))]))}};export{xe as default};
