import{n as C,r as x,_ as I,b as $,w as k,o as g,c as h,a as S,p as O,k as V,q as z,v as M,F as U,s as A,t as w,x as T,y as B,z as b,B as D,e as f,i as F,h as N,j,d as n,l as R,T as H,A as L,C as q,m as y,u as _,D as E}from"./index-03c87ced.js";const G=C();function r(t,s,o){const a=x({});try{G.updateSettingValue(t,s),a.value=s,a.success=o}catch(e){console.error(e),a.error=e.message}return a}function J(t,s){const o={"preference-theme":()=>r(t,s,"Theme preferences updated"),"preference-storage":()=>r(t,s,"LocalStorage preferences updated"),"preference-gtm":()=>r(t,s,"Google Tag Manager preferences updated"),"setting-locale":()=>r(t,s,"Chatbox language settings updated"),"setting-merge":()=>r(t,s,"Session merge settings updated"),"setting-maximized":()=>r(t,s,"Maximized settings updated"),"setting-fullview":()=>r(t,s,"Fullview settings updated"),"setting-safemode":()=>r(t,s,"Safe mode settings updated"),"setting-cookie":()=>r(t,s===""?null:Number(s),"Cookies expiration date updated"),"callback-session-loaded":()=>r(t,s,"Callback settings on session loaded updated"),"callback-chat-initiated":()=>r(t,s,"Callback settings on chat initiated updated"),"callback-chat-opened":()=>r(t,s,"Callback settings on session chat opened updated"),"callback-chat-closed":()=>r(t,s,"Callback settings on session chat closed updated"),"callback-message-received":()=>r(t,s,"Callback settings on session chat opened updated"),"callback-message-sent":()=>r(t,s,"Callback settings on session chat closed updated"),"callback-nickname-changed":()=>r(t,s,"Callback settings on nickname changed updated"),"callback-email-changed":()=>r(t,s,"Callback settings on email changed updated"),"callback-phone-changed":()=>r(t,s,"Callback settings on phone changed updated"),"callback-avatar-changed":()=>r(t,s,"Callback settings on avatar changed updated")};return o[t]?o[t]():null}const K=t=>(O("data-v-a55add25"),t=t(),V(),t),P=["for"],Q=["id","checked"],W=K(()=>S("div",{class:"slider"},null,-1)),X={__name:"BaseCheck",props:{value:{type:Boolean,default:!1},id:{type:String,default:""},label:{type:String,default:""}},emits:["update:value"],setup(t,{emit:s}){const o=t,a=$(o.value);return k(()=>o.value,e=>{a.value=e}),k(a,e=>{s("update:value",e)}),(e,p)=>(g(),h("label",{class:"switch",for:t.id},[S("input",{id:t.id,type:"checkbox",checked:a.value,onInput:p[0]||(p[0]=m=>a.value=!a.value)},null,40,Q),W],8,P))}},Y=I(X,[["__scopeId","data-v-a55add25"]]);const Z=["id"],ee=["value"],te=["for"],se={__name:"BaseSelect",props:{options:{type:Object,default:()=>{}},id:{type:String,default:""},value:{type:String,default:""},name:{type:String,default:""}},emits:["update:value"],setup(t,{emit:s}){const a=$(t.value);return k(a,e=>{s("update:value",e)}),(e,p)=>(g(),h("div",null,[z(S("select",{id:t.id,"onUpdate:modelValue":p[0]||(p[0]=m=>a.value=m)},[(g(!0),h(U,null,A(t.options,(m,d)=>(g(),h("option",{value:m,key:m},w(d),9,ee))),128))],8,Z),[[M,a.value]]),S("label",{for:t.id},w(t.name),9,te)]))}},ne=I(se,[["__scopeId","data-v-f7762dfb"]]);const ae={key:0,class:"element"},ie={class:"form"},oe={class:"setting-container"},le={class:"label"},re=["for"],ce={class:"setting-item"},de={__name:"SettingsHandler",props:{settingId:{type:String,default:""}},emits:["settings-result","reset-settings"],setup(t,{emit:s}){const o=t,a=C(),e=x({value:"",error:"",success:""});T(()=>{o.settingId==="reset-settings"?Object.assign(e,{id:"reset-settings",color:"red",value:"reset settings",label:"Restore default settings"}):Object.assign(e,a.getSettingById(o.settingId))});const p=B(()=>e.id==="setting-cookie"),m=B(()=>e.id==="setting-locale"),d=B(()=>e.id==="reset-settings");async function u(v,c){e.success="",e.error="";try{const l=await J(v,c);l&&(l.error&&l.error!==""&&setTimeout(()=>{e.error=l.error,s("settings-result",e)},1),l.success&&l.success!==""&&(e.success=l.success,s("settings-result",e)))}catch(l){console.error("An app error occurred:",l),e.error="App error: Settings",s("settings-result",e)}}return k(()=>a.settings.lockMaximized.value,v=>{v&&u(a.settings.lockFullview.id,!1),Object.assign(e,a.getSettingById(o.settingId))}),k(()=>a.settings.lockFullview.value,v=>{v&&u(a.settings.lockMaximized.id,!1),Object.assign(e,a.getSettingById(o.settingId))}),k(()=>a.preferences.themeDetect.value,()=>{Object.assign(e,a.getSettingById(o.settingId))}),(v,c)=>e.id?(g(),h("div",ae,[S("div",ie,[S("div",oe,[S("div",le,[S("label",{for:e.id},w(e.label),9,re)]),S("div",ce,[m.value?(g(),b(ne,{key:0,id:e.id,value:e.value,"onUpdate:value":[c[0]||(c[0]=l=>e.value=l),c[1]||(c[1]=l=>u(e.id,e.value))],options:e.options,name:e.name},null,8,["id","value","options","name"])):p.value?(g(),b(D,{key:1,id:e.id,label:e.name,value:e.value,"onUpdate:value":[c[2]||(c[2]=l=>e.value=l),c[3]||(c[3]=l=>u(e.id,e.value))],number:""},null,8,["id","label","value"])):d.value?(g(),b(N,{key:2,id:e.id,color:e.color,onClick:c[4]||(c[4]=l=>v.$emit("reset-settings")),button:""},{button:f(()=>[F(w(e.value),1)]),_:1},8,["id","color"])):(g(),b(Y,{key:3,id:e.id,label:e.label,value:e.value,"onUpdate:value":[c[5]||(c[5]=l=>e.value=l),c[6]||(c[6]=l=>u(e.id,e.value))]},null,8,["id","label","value"]))])])])])):j("",!0)}},i=I(de,[["__scopeId","data-v-faa6d7f6"]]),ge={class:"view-wrapper"},pe={__name:"SettingsView",setup(t){const{bannerOptions:s,displayBanner:o,closeBanner:a}=q();function e(d){let u="";d.error&&d.error!==""?u="error":d.error===""&&d.success&&d.success!==""&&(u="success"),u==="error"?o({message:"There was an error saving these settings: "+d.error,type:"error",animate:!0}):u==="success"&&o({message:"Settings saved successfully! Some changes require the app to be restarted.",type:"info",action:"reload",animate:!1})}function p(d){d==="reload"&&(window.sessionStorage.setItem("settingsSaved","true"),window.location.reload())}function m(){localStorage.removeItem("user"),window.sessionStorage.removeItem("settingsSaved"),window.sessionStorage.setItem("settingsReset","true"),window.location.reload()}return T(()=>{window.sessionStorage.getItem("settingsSaved")&&(o({message:"Settings have been applied and loaded successfully!",type:"success",animate:!0}),window.sessionStorage.removeItem("settingsSaved")),window.sessionStorage.getItem("settingsReset")&&(o({message:"Default settings have been restored.",type:"warning",animate:!0}),window.sessionStorage.removeItem("settingsReset"))}),(d,u)=>(g(),h("div",ge,[n(R,{grow:""},{container:f(()=>[n(y,null,{card:f(()=>[n(i,{"setting-id":"preference-theme",onSettingsResult:e}),n(i,{"setting-id":"preference-storage",onSettingsResult:e}),n(i,{"setting-id":"preference-gtm",onSettingsResult:e})]),_:1}),n(y,null,{card:f(()=>[n(i,{"setting-id":"setting-merge",onSettingsResult:e}),n(i,{"setting-id":"setting-maximized",onSettingsResult:e}),n(i,{"setting-id":"setting-fullview",onSettingsResult:e}),n(i,{"setting-id":"setting-safemode",onSettingsResult:e}),n(i,{"setting-id":"setting-cookie",onSettingsResult:e}),n(i,{"setting-id":"setting-locale",onSettingsResult:e})]),_:1}),n(y,null,{card:f(()=>[n(i,{"setting-id":"reset-settings",onResetSettings:m})]),_:1})]),_:1}),n(R,{grow:""},{container:f(()=>[n(y,null,{card:f(()=>[n(i,{"setting-id":"callback-session-loaded",onSettingsResult:e}),n(i,{"setting-id":"callback-chat-initiated",onSettingsResult:e}),n(i,{"setting-id":"callback-chat-opened",onSettingsResult:e}),n(i,{"setting-id":"callback-chat-closed",onSettingsResult:e}),n(i,{"setting-id":"callback-message-sent",onSettingsResult:e}),n(i,{"setting-id":"callback-message-received",onSettingsResult:e}),n(i,{"setting-id":"callback-nickname-changed",onSettingsResult:e}),n(i,{"setting-id":"callback-email-changed",onSettingsResult:e}),n(i,{"setting-id":"callback-phone-changed",onSettingsResult:e}),n(i,{"setting-id":"callback-avatar-changed",onSettingsResult:e})]),_:1})]),_:1}),(g(),b(L,{to:"#app"},[n(H,{name:"banner",mode:"out-in"},{default:f(()=>[_(s).visibility?(g(),b(E,{key:0,onBannerClose:_(a),onBannerAction:p,message:_(s).message,action:_(s).action,animate:_(s).animate,type:_(s).type},null,8,["onBannerClose","message","action","animate","type"])):j("",!0)]),_:1})]))]))}};export{pe as default};
